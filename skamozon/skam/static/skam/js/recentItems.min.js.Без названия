(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach(function(t){_defineProperty(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _iterableToArrayLimit(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],s=!0,a=!1;try{for(r=r.call(e);!(s=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);s=!0);}catch(e){a=!0,o=e}finally{try{s||null==r.return||r.return()}finally{if(a)throw o}}return i}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function asyncGeneratorStep(e,t,r,n,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,o)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function s(e){asyncGeneratorStep(i,n,o,s,a,"next",e)}function a(e){asyncGeneratorStep(i,n,o,s,a,"throw",e)}s(void 0)})}}!function(){var e=function(){function e(e,t){this.rootElement=e,this.settings=t}var t=e.prototype;return t.showWhenInViewPortAsync=function(){var e=this;if(this.$apiSupport.intersectionObserver)this.observer=new IntersectionObserver(function(t,r){t.forEach(function(t){var n=t.isIntersecting,o=t.intersectionRatio;(n||o>0)&&(e.showAsync(),r.unobserve(e.rootElement))})},{rootMargin:"100px"}),this.observer.observe(this.rootElement);else{var t=this.rootElement.getBoundingClientRect().top;document.documentElement.clientHeight>t?this.showAsync():(this._onScrollLoad=this.$helper.throttle(function(){window.pageYOffset>=t-500&&(window.removeEventListener("scroll",e._onScrollLoad),e.showAsync())},300),window.addEventListener("scroll",this._onScrollLoad))}return this},t.showAsync=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,r,n,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([this._loadGoodsAsync(),this._loadTemplateAsync()]);case 3:t=e.sent,r=_slicedToArray(t,2),n=r[0],r[1].link(this.rootElement,{recentItems:n},_objectSpread({openItem:this.openItem.bind(this),seeAllClickEvent:this.seeAllClickEvent.bind(this)},this.settings)),o=null==n?void 0:n.map(function(e){return e.nmId}),this._showCarouselWba(o),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0.message);case 15:case"end":return e.stop()}},e,this,[[0,12]])}));return function(){return e.apply(this,arguments)}}(),t.openItem=function(e,t){var r=t.view.data;this.$productCardPopup.show(r.cod1S,null,"RG");var n=e.target.closest(".goods-slider__item");if(this._clickCarouselWba(n,r.cod1S),this.settings.analiticsCode){var o=null==n?0:n.dataset.analiticsIid;this.$analitic.saveState({l:this.settings.analiticsCode,iid:o})}},t.seeAllClickEvent=function(e){this.$analitic.saveState({l:this.settings.analiticsCode}),this._sendCarouselWbaEvent("Carousel_All",this.settings.analiticsCode,0,0)},t._sendCarouselWbaEvent=function(e,t,r,n){this.$analitic.sendCarouselWbaEvent(e,t,r,n,0)},t._showCarouselWba=function(e){this._sendCarouselWbaEvent("Carousel_S",this.settings.analiticsCode,0,e)},t._clickCarouselWba=function(e,t){this._sendCarouselWbaEvent("Carousel_T",this.settings.analiticsCode,e.dataset.analiticsIid,t)},t._loadGoodsAsync=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$httpClient.fetchJSON("/webapi/spa/modules/recentitems",{method:"POST"});case 2:return t=e.sent,e.next=5,wb.xnm.getGoodsForRecommend(t.slice(0,20),!0,!0);case 5:return r=e.sent,e.abrupt("return",(null!=r?r:[]).slice(0,10));case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t._loadTemplateAsync=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.views.loadTemplateAsync("RecentItemsCarousel");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),e}();window.__spaModuleManager__.register("recentItems",e)}();

},{}]},{},[1]);
