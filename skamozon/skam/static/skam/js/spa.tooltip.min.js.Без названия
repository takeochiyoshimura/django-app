function ownKeys(e,t){var r,n=Object.keys(e);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(e),t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)),n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach(function(t){_defineProperty(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(r="Object"===r&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function asyncGeneratorStep(t,e,r,n,o,i,s){try{var a=t[i](s),l=a.value}catch(t){return void r(t)}a.done?e(l):Promise.resolve(l).then(n,o)}function _asyncToGenerator(a){return function(){var t=this,s=arguments;return new Promise(function(e,r){var n=a.apply(t,s);function o(t){asyncGeneratorStep(n,e,r,o,i,"next",t)}function i(t){asyncGeneratorStep(n,e,r,o,i,"throw",t)}o(void 0)})}}!function(n){"use strict";n.views&&n.views.tags({tooltip:{dataBoundOnly:!0,boundProps:["text"],tooltipClass:"tooltip",init:function(){this.settings={delay:0,dist:10,distAlignBy:0,responsive:!0},this.text=this.tagCtx.props.text,this.tmplName=this.tagCtx.props.tmplName,this.tmplData=this.tagCtx.props.tmplData,this.contentSlr=this.tagCtx.props.contentSlr,this.classList=(null==(t=this.tagCtx.props.classes)?void 0:t.split(" "))||[],this.useBinding=this.tagCtx.props.useBinding,this.overlay=this.tagCtx.props.overlay,this.tagCtx.props.hasOwnProperty("distance")&&(this.settings.dist=this.tagCtx.props.distance),this.tagCtx.props.hasOwnProperty("distanceAlignBy")&&(this.settings.distAlignBy=this.tagCtx.props.distanceAlignBy),this.tagCtx.props.hasOwnProperty("delay")&&(this.settings.delay=this.tagCtx.props.delay),this.responsive=this.settings.responsive,this.tagCtx.props.hasOwnProperty("responsive")&&(this.responsive=this.tagCtx.props.responsive);var t=this.tagCtx.props.pos||"center top";this.posHorizontal=t.split(" ")[0],this.posVertical=t.split(" ")[1],this.linkedElMarkup=this.linkCtx.elem.innerHTML,this.rightCollision=this.tagCtx.props.rightCollision,this.disabled=this.tagCtx.props.disabled,this.preventDefault=this.tagCtx.props.preventDefault,this.popupMode=this.responsive&&"m"===wb.settings.displayMode,this.showTooltip=!1},onUpdate:!1,onAfterChange:function(){this.text=this.tagCtx.props.text},onBind:function(){if(this.disabled)return!1;this._bindEvents()},onUnbind:function(){this._destroy()},_bindEvents:function(){var e=this;"always"==this.tagCtx.props.trigger?this._positionAt.call(this):"click"==this.tagCtx.props.trigger||this.popupMode?this.linkCtx.elem.addEventListener("click",this._positionAt.bind(this)):"Shown"==this.tagCtx.props.trigger?(this.linkCtx.elem.addEventListener("Shown",this._positionAt.bind(this)),this.linkCtx.elem.addEventListener("Unshown",this._destroy.bind(this))):(this.linkCtx.elem.addEventListener("mouseover",this._positionAt.bind(this)),this.linkCtx.elem.addEventListener("mousemove",this._positionAt.bind(this)),this.linkCtx.elem.addEventListener("mouseout",function(t){e.linkCtx.elem.contains(t.relatedTarget)||setTimeout(function(){e.insideTip||e._destroy()},e.settings.delay)}))},_destroy:function(){var t;document.removeEventListener("click",this),!this.popupMode&&this.tooltip&&document.body.removeChild(this.tooltip),(this.tooltip=null)!=(t=this.overlayEl)&&t.remove(),this.showTooltip=!1},_getMarkup:function(){var r=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r.contentSlr)return t.abrupt("return",{html:document.querySelector(r.contentSlr).innerHTML});t.next=2;break;case 2:if(r.tmplName&&!n.templates[r.tmplName])return t.next=5,n.views.loadTemplateAsync(r.tmplName);t.next=5;break;case 5:if(r.tagCtx.props.useBind&&r.tmplName)return e=n.link[r.tmplName],t.abrupt("return",{bound:!0,link:e});t.next=8;break;case 8:if(r.tmplName)return t.abrupt("return",{html:n.templates[r.tmplName].render(r._getTmplData(),r.tagCtx.props.tmplHelper)});t.next=10;break;case 10:if(r.text)return t.abrupt("return",{html:'<div class="tooltip__content">'.concat(r.text,"</div>")});t.next=12;break;case 12:return t.abrupt("return",null);case 13:case"end":return t.stop()}},t)}))()},handleEvent:function(t){"click"!=t.type||this.linkCtx.elem.contains(t.target)||this.tooltip.contains(t.target)||this._destroy()},_getTmplData:function(){return"function"==typeof this.tmplData?this.tmplData():this.tmplData},_positionAt:function(u){var c=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var e,r,n,o,i,s,a,l,p;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(c.showTooltip&&"click"==c.tagCtx.props.trigger)return t.abrupt("return",c._destroy());t.next=2;break;case 2:if(c.tooltip)return t.abrupt("return");t.next=4;break;case 4:return c.showTooltip=!0,t.next=7,c._getMarkup();case 7:if(e=t.sent){t.next=10;break}return t.abrupt("return");case 10:if(c.showTooltip){t.next=12;break}return t.abrupt("return");case 12:if(c.popupMode)return c.preventDefault&&u.preventDefault(),r={lockScroll:!0,modal:!1,showCloseBtn:"always"!=c.tagCtx.props.trigger,useHtml:!0,contentClasses:["content"],popupClassesList:["shown","tooltip","tooltip--mobile"].concat(_toConsumableArray(c.classList)),useCenteredFunction:!0,onShow:function(t){return t.classList.remove("popup")},onHide:function(){var t,e;null!=(t=c.tagCtx.props.tmplHelper)&&null!=(e=t.onPopupHide)&&e.call(t),c._destroy()}},e.bound?r.onShow=function(t){t.classList.remove("popup"),e.link(t.querySelector(".content"),c._getTmplData(),_objectSpread(_objectSpread({},c.tagCtx.props.tmplHelper),{},{close:function(){return c.tooltip.close()}}))}:r.msg=e.html,c.tooltip=wb.popup.showCustomPopup(r),t.abrupt("return");t.next=20;break;case 20:document.querySelectorAll("."+c.tooltipClass).forEach(function(t){var e;return null==(e=t.close)?void 0:e.call(t)}),c.tooltip=document.createElement("div"),c.tooltip.style.display="inline-block",c.tooltip.style.position="absolute",c.tooltip.style.zIndex="11111",c.tooltip.style.width=c.tagCtx.props.width,e.bound?(r=c.tagCtx.view,e.link(c.tooltip,c._getTmplData(),_objectSpread(_objectSpread({parentView:r},c.tagCtx.props.tmplHelper),{},{close:c._destroy.bind(c)}))):c.tooltip.innerHTML=e.html,c.tooltip.classList.add(c.tooltipClass),c.tooltip.classList.addMany(c.classList),c.tooltip.close=function(){return c._destroy()},"click"!=c.tagCtx.props.trigger&&(c.tooltip.addEventListener("mouseenter",function(){return c.insideTip=!0}),c.tooltip.addEventListener("mouseleave",function(){c.insideTip=!1,setTimeout(function(){c.insideTip||c._destroy()},c.settings.delay)})),"click"==c.tagCtx.props.trigger&&document.addEventListener("click",c),c.overlay&&(c.overlayEl=document.createElement("div"),c.overlayEl.classList.addMany(["overlay","j-custom-overlay"]),document.body.appendChild(c.overlayEl)),document.body.appendChild(c.tooltip),n=c.linkCtx.elem.getBoundingClientRect(),s=function(t,e){if(c.tagCtx.props.alignBy){var r=c.linkCtx.elem.closest(c.tagCtx.props.alignBy);if(r)return parseInt(r.getBoundingClientRect()[e])+c.settings.distAlignBy}return parseInt(t)},t.t0=c.posHorizontal,t.next="left"===t.t0?39:"right"===t.t0?42:"alignleft"===t.t0?45:"alignright"===t.t0?49:"aligncenter"===t.t0?51:(t.t0,56);break;case 39:return o=parseInt(n.left)-c.settings.dist-c.tooltip.offsetWidth,parseInt(n.left)-c.tooltip.offsetWidth<0&&(o=c.settings.dist),t.abrupt("break",59);case 42:return o=n.right+c.settings.dist,parseInt(n.right)+c.tooltip.offsetWidth>document.documentElement.clientWidth&&(o=document.documentElement.clientWidth-c.tooltip.offsetWidth-c.settings.dist),t.abrupt("break",59);case 45:return o=s(n.left,"left"),(a=document.documentElement.clientWidth-(o+c.tooltip.offsetWidth))<0&&(o+=a),t.abrupt("break",59);case 49:return o=s(n.right,"right")-c.tooltip.offsetWidth,t.abrupt("break",59);case 51:return a=s(n.left,"left"),l=s(n.left,"right"),o=(a+l)/2-c.tooltip.offsetWidth/2,t.abrupt("break",59);case 56:o=parseInt(n.left)+((null!=(l=c.linkCtx.elem.offsetWidth)?l:n.width)-c.tooltip.offsetWidth)/2,0<(p=parseInt(n.right)+c.tooltip.offsetWidth/2-document.documentElement.clientWidth)&&(o-=p+c.settings.dist);case 59:t.t1=c.posVertical,t.next="center"===t.t1?62:"bottom"===t.t1?64:(t.t1,67);break;case 62:return i=(parseInt(n.top)+parseInt(n.bottom))/2-c.tooltip.offsetHeight/2,t.abrupt("break",68);case 64:return i=parseInt(n.bottom)+c.settings.dist,parseInt(n.bottom)+c.tooltip.offsetHeight>document.documentElement.clientHeight&&(i=parseInt(n.top)-c.tooltip.offsetHeight-c.settings.dist),t.abrupt("break",68);case 67:i=parseInt(n.top)-c.tooltip.offsetHeight-c.settings.dist;case 68:o=o<0?parseInt(n.left):o,i=i<0?parseInt(n.bottom)+c.settings.dist:i,c.tooltip.style.left=o+"px",c.tooltip.style.top=i+pageYOffset+"px";case 72:case"end":return t.stop()}},t)}))()}}})}(this.jQuery);