!function(){"use strict";var e,i,s,t,o,n;function a(t){this.type=t,this.propagationStopped=!1}function r(){}!function(t,e){void 0===e&&(e={});var i,s=e.insertAt;t&&"undefined"!=typeof document&&(i=document.head||document.getElementsByTagName("head")[0],(e=document.createElement("style")).type="text/css","top"===s&&i.firstChild?i.insertBefore(e,i.firstChild):i.appendChild(e),e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t)))}(".mini-suggest__popup{color:#000;display:none;left:0;position:absolute;top:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:100%}.mini-suggest__popup:before{border-radius:.1px;bottom:0;-webkit-box-shadow:0 8px 25px -5px rgba(0,0,0,.25);box-shadow:0 8px 25px -5px rgba(0,0,0,.25);height:50%}.mini-suggest__popup:after,.mini-suggest__popup:before{content:\"\";left:0;position:absolute;width:100%;z-index:-1}.mini-suggest__popup:after{background:#fff;height:100%;top:0}.mini-suggest__popup_visible,.mini-suggest_open .mini-suggest__popup{display:block}.mini-suggest__popup-content{display:block;list-style:none;margin:0;padding:0}.mini-suggest__popup-content:before{top:0}.mini-suggest__item{box-sizing:border-box;display:block}.mini-suggest__item-link{-webkit-tap-highlight-color:rgba(0,0,0,0);color:#000;display:block;outline:none;text-decoration:none}.mini-suggest__item-title{display:block;white-space:normal}.mini-suggest__item_type_nav .mini-suggest__item-title,.mini-suggest__item_type_nav .mini-suggest__item-title:active{color:navy}.mini-suggest__item-info{box-sizing:border-box;color:rgba(84,96,122,.68);display:inline-block;margin-right:4px;margin-top:2px;overflow:hidden;text-overflow:ellipsis;vertical-align:top;white-space:nowrap}.mini-suggest__item_type_nav .mini-suggest__item-info{color:#006000}.mini-suggest__item *{pointer-events:none}.mini-suggest__item-button,.mini-suggest__item-link{pointer-events:all}.mini-suggest__item-button{opacity:.2;position:absolute;right:0;top:0}.mini-suggest__item-icon{background-position:50%;background-repeat:no-repeat;background-size:contain;display:inline-block;vertical-align:middle}.mini-suggest__item-icon_size_s{height:16px;width:16px}.mini-suggest__popup_disabled{pointer-events:none}.mini-suggest__popup{z-index:2}.mini-suggest__item{background-color:#fff;line-height:20px;position:relative;-ms-touch-action:manipulation;touch-action:manipulation;-webkit-transition:background-color .05s linear;transition:background-color .05s linear}.mini-suggest__item:active{background-color:#d7d8da}.mini-suggest__item-title{color:#000;font-size:17px}.mini-suggest__item-info,.mini-suggest__popup{font-size:15px}.mini-suggest__item_type_fact .mini-suggest__item-info{font-size:14px;line-height:18px}.mini-suggest__popup:before{content:none}.mini-suggest__popup:after{background-color:#eeeff2;border-bottom-left-radius:16px;border-bottom-right-radius:16px;border-top:1px solid rgba(0,0,0,.1);box-sizing:border-box}.mini-suggest__popup-content{padding:0 15px 0 7px}.mini-suggest__item:not(.mini-suggest__item_type_tpah){margin:0 -15px 0 -7px}.mini-suggest__item-link,.mini-suggest__item_type_fact,.mini-suggest__item_type_fulltext{padding:10px 15px 11px}.mini-suggest__item_type_tpah{border-radius:10px;box-shadow:0 .5px rgba(0,0,0,.2);box-sizing:border-box;display:inline-block;line-height:34px;margin:8px 0 0 8px;max-width:100%;overflow:hidden;padding:0 14px;text-overflow:ellipsis;vertical-align:top;white-space:nowrap}.mini-suggest__item_type_tpah:last-of-type{margin-bottom:16px}.mini-suggest__item_personal_yes:first-of-type:last-of-type,.mini-suggest__item_type_fulltext:first-of-type~.mini-suggest__item_personal_yes:last-of-type{height:49px}.mini-suggest__item_type_fulltext:first-of-type~.mini-suggest__item_type_fulltext:not(.mini-suggest__item_personal_yes):last-of-type,.mini-suggest__item_type_fulltext:not(.mini-suggest__item_personal_yes):first-of-type:last-of-type{padding-bottom:19px}.mini-suggest__item_type_tpah:active{box-shadow:none}.mini-suggest__item-button{height:41px;opacity:1;right:2px;width:41px}.mini-suggest__item-button:active{opacity:.42}.mini-suggest__item_type_nav .mini-suggest__item-title{font-weight:500}.mini-suggest__item-info{max-width:100%}.mini-suggest__item_type_nav .mini-suggest__item-info{font-weight:500;max-width:calc(100% - 90px)}.mini-suggest__item_type_fulltext:first-child{margin-top:1px}.mini-suggest__item:not(.mini-suggest__item_type_fulltext),.mini-suggest__item:not(.mini-suggest__item_type_fulltext)+.mini-suggest__item{margin-top:8px}.mini-suggest__item:not(.mini-suggest__item_type_tpah):not(.mini-suggest__item_type_fulltext){border-radius:16px}.mini-suggest__item:not(.mini-suggest__item_type_tpah):not(.mini-suggest__item_type_fulltext):first-of-type:last-of-type{border-top-left-radius:0;border-top-right-radius:0;margin-top:1px}.mini-suggest__item:not(.mini-suggest__item_type_fulltext)+.mini-suggest__item_type_fulltext,.mini-suggest__item_type_tpah+.mini-suggest__item:not(.mini-suggest__item_type_tpah){border-top-left-radius:16px;border-top-right-radius:16px}.mini-suggest__item:not(.mini-suggest__item_type_tpah):last-of-type{border-bottom-left-radius:16px;border-bottom-right-radius:16px}.body_search_yes .mini-suggest__popup{z-index:1000}.body_search_yes .mini-suggest__popup-spacer{display:none}.mini-suggest__divider{background:#ababab;height:1px;margin-bottom:-1px;margin-left:8px;margin-top:-1px;opacity:.3;z-index:1}.mini-suggest__item_with-button{overflow:hidden;padding-right:43px;position:relative;text-overflow:ellipsis;white-space:nowrap}.mini-suggest__popup .mini-suggest__item.mini-suggest__item_with-button{padding-right:45px}.mini-suggest__item_with-arrow.mini-suggest__item .mini-suggest__item-link{padding-right:47px;position:relative}.mini-suggest__item_with-arrow.mini-suggest__item .mini-suggest__item-link:after{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='10' height='17' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M7.586 9 1.293 2.707a1 1 0 1 1 1.414-1.414l6.647 6.646a1.5 1.5 0 0 1 0 2.122l-6.647 6.646a1 1 0 0 1-1.414-1.414L7.586 9z' fill='%23000'/%3E%3C/svg%3E\");background-position:50%;background-repeat:no-repeat;background-size:7px 11px;content:\"\";height:20px;margin-top:-10px;position:absolute;right:14px;top:50%;width:20px}.mini-suggest__item-mark{background-position:50%;background-repeat:no-repeat;background-size:contain;display:inline-block;height:16px;margin-left:4px;margin-right:2px;vertical-align:middle;width:16px}.mini-suggest__item-mark_type_verified{background-image:url(//yastatic.net/s3/frontend/yandex-int/mini-suggest/_/4v1kDHEM.svg)}.mini-suggest__popup_svg_no .mini-suggest__item-mark_type_verified{background-image:url(//yastatic.net/s3/frontend/yandex-int/mini-suggest/_/3HQAwFVY.png)}.mini-suggest__item-mark_type_shield{background-image:url(//yastatic.net/s3/frontend/yandex-int/mini-suggest/_/abLDk3W1.svg)}.mini-suggest__popup_svg_no .mini-suggest__item-mark_type_shield{background-image:url(//yastatic.net/s3/frontend/yandex-int/mini-suggest/_/4hLzKMpi.png)}.mini-suggest__item-mark_type_turbo{background-image:url(//yastatic.net/s3/frontend/yandex-int/mini-suggest/_/2qiybvRo.svg)}.mini-suggest__popup_svg_no .mini-suggest__item-mark_type_turbo{background-image:url(//yastatic.net/s3/frontend/yandex-int/mini-suggest/_/MsLRd5f6.png)}.mini-suggest__item-descr+.mini-suggest__item-descr,.mini-suggest__item-mark+.mini-suggest__item-descr{margin-left:6px}.mini-suggest__item-mark+.mini-suggest__item-descr:before,.mini-suggest__item-title+.mini-suggest__item-descr:before{content:\"\"}.mini-suggest__item-descr{color:rgba(84,96,122,.68);display:inline-block;overflow:hidden;text-overflow:ellipsis;vertical-align:bottom;white-space:nowrap}.mini-suggest__item-descr:before{content:\"· \"}.mini-suggest__item-thumb{background-position:50%;background-repeat:no-repeat;border-radius:4px;display:inline-block;position:relative;vertical-align:middle}.mini-suggest__item-thumb+.mini-suggest__item-content{box-sizing:border-box;display:inline-block;vertical-align:middle;width:100%}.mini-suggest__item-thumb_shade:before{border-radius:4px;content:\"\";height:100%;position:absolute;width:100%}.mini-suggest__item-thumb_cover{background-size:cover}.mini-suggest__item-thumb_contain{background-size:contain}.mini-suggest__item-thumb-badge{background-color:#04b;border-radius:0 4px;bottom:0;color:#fff;display:block;font-size:13px;line-height:1.308;padding:2px 4px;position:absolute;text-align:center;z-index:2}.mini-suggest__item-thumb_border{border:1px solid rgba(0,0,0,.2)}.mini-suggest__item-thumb_border+.mini-suggest__item-content{margin-left:-2px}.mini-suggest__item-thumb_round{border-radius:100px}.mini-suggest__item_type_nav.mini-suggest__item_monochrome .mini-suggest__item-title,.mini-suggest__item_type_nav.mini-suggest__item_monochrome:active{color:#000}.mini-suggest__item_type_nav.mini-suggest__item_monochrome .mini-suggest__item-info{color:rgba(84,96,122,.68)}.mini-suggest__item-line,.mini-suggest__item-thumb+.mini-suggest__item-content .mini-suggest__item-title{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mini-suggest__item-line .mini-suggest__item-mark:first-child{margin-left:0}.mini-suggest__item-descr{font-size:16px}.mini-suggest__item-thumb_size_xl{height:56px;margin-right:-56px;width:56px}.mini-suggest__item-thumb_size_xl+.mini-suggest__item-content{padding-left:69px}.mini-suggest__item-thumb_size_xl.mini-suggest__item-thumb_orientation_landscape{margin-right:-100px;width:100px}.mini-suggest__item-thumb_size_xl.mini-suggest__item-thumb_orientation_landscape+.mini-suggest__item-content{padding-left:113px}.mini-suggest__item-thumb_size_xl.mini-suggest__item-thumb_orientation_portrait{height:78px}.mini-suggest__item-thumb_size_l{height:48px;margin-right:-48px;width:48px}.mini-suggest__item-thumb_size_l+.mini-suggest__item-content{padding-left:61px}.mini-suggest__item-thumb_size_l.mini-suggest__item-thumb_orientation_landscape{margin-right:-87px;width:87px}.mini-suggest__item-thumb_size_l.mini-suggest__item-thumb_orientation_landscape+.mini-suggest__item-content{padding-left:100px}.mini-suggest__item-thumb_size_l.mini-suggest__item-thumb_orientation_portrait{height:68px}.mini-suggest__item-thumb_size_l+.mini-suggest__item-content .mini-suggest__item-button{top:14px}.mini-suggest__item-thumb_size_m{height:40px;margin-right:-40px;width:40px}.mini-suggest__item-thumb_size_m+.mini-suggest__item-content{padding-left:53px}.mini-suggest__item-thumb_size_m.mini-suggest__item-thumb_orientation_landscape{margin-right:-73px;width:73px}.mini-suggest__item-thumb_size_m.mini-suggest__item-thumb_orientation_portrait{height:57px}.mini-suggest__item-thumb_size_m.mini-suggest__item-thumb_orientation_landscape+.mini-suggest__item-content{padding-left:86px}.mini-suggest__item-thumb_size_s{height:35px;margin-right:-35px;width:35px}.mini-suggest__item-thumb_size_s+.mini-suggest__item-content{padding-left:48px}.mini-suggest__item-thumb_size_s.mini-suggest__item-thumb_orientation_landscape{margin-right:-64px;width:64px}.mini-suggest__item-thumb_size_s.mini-suggest__item-thumb_orientation_portrait{height:50px}.mini-suggest__item-thumb_size_s.mini-suggest__item-thumb_orientation_landscape+.mini-suggest__item-content{padding-left:77px}.mini-suggest__item-thumb_size_xs{height:32px;margin-right:-32px;width:32px}.mini-suggest__item-thumb_size_xs+.mini-suggest__item-content{padding-left:45px}.mini-suggest__item-thumb_size_xs.mini-suggest__item-thumb_orientation_landscape{margin-right:-58px;width:58px}.mini-suggest__item-thumb_size_xs.mini-suggest__item-thumb_orientation_portrait{height:46px}.mini-suggest__item-thumb_size_xs.mini-suggest__item-thumb_orientation_landscape+.mini-suggest__item-content{padding-left:71px}.mini-suggest__item-thumb_size_xxs{height:16px;margin-right:-16px;width:16px}.mini-suggest__item-thumb_size_xxs+.mini-suggest__item-content{padding-left:24px}.mini-suggest__item-thumb-badge{font-weight:700}.mini-suggest__item-thumb_shade:before{background:rgba(0,0,0,.05)}.mini-suggest__item-mark_type_turbo,.mini-suggest__item-mark_type_verified{margin-top:2px}.mini-suggest__item-mark_type_search{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='12' height='12' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M7.965 9.026a5 5 0 1 1 1.06-1.06L12 10.939 10.94 12 7.964 9.026ZM8.5 5a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0Z' fill='%23000'/%3E%3C/svg%3E\");height:12px;margin-left:0;margin-right:7px;opacity:.5;width:12px}.mini-suggest__item-descr{display:inline;font-size:14px}.mini-suggest__item-descr:before{content:none}.mini-suggest__item-descr:not(:first-child){margin-left:9px;position:relative}.mini-suggest__item-descr:not(:first-child):before{background:#999;border-radius:50%;content:\"\";height:4px;left:-8px;margin-top:-2px;position:absolute;top:50%;width:4px}.mini-suggest__item-line{color:#999;margin-top:2px}.mini-suggest__item-line .mini-suggest__item-info{display:inline}.mini-suggest__item-mark_type_search{opacity:.4}.mini-suggest__item-descr{color:#999;font-weight:500}.mini-suggest__item-thumb_blurred{background-position:-9999px;overflow:hidden}.mini-suggest__item-thumb_blurred:after{background:inherit;background-position:50% 50%;content:\"\";filter:blur(6px);height:100%;position:absolute;width:100%;z-index:1}.mini-suggest__item_personal_yes.mini-suggest__item_hidden_yes{height:0;padding-bottom:0;padding-top:0;transition:.3s linear;transition-property:height,padding,visibility;visibility:hidden}.mini-suggest__item_personal_yes{height:41px}.mini-suggest__item_personal_yes.mini-suggest__item_hidden_yes:first-of-type:last-of-type,.mini-suggest__item_type_fulltext:first-of-type~.mini-suggest__item_personal_yes.mini-suggest__item_hidden_yes:last-of-type{height:0}.mini-suggest__delete{background:no-repeat 50% url(//yastatic.net/s3/frontend/yandex-int/mini-suggest/_/3rzqVAwC.svg)}.mini-suggest__popup_svg_no .mini-suggest__delete{background-image:url(//yastatic.net/s3/frontend/yandex-int/mini-suggest/_/3QTSJeZv.png);background-size:32px 32px}.mini-suggest__delete{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='12' height='12' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M4.936 6 .694 1.755l1.06-1.06 4.243 4.242L10.24.697l1.06 1.06-4.238 4.242 4.243 4.243-1.06 1.06-4.248-4.238-4.243 4.238-1.06-1.06L4.936 6Z' fill='%23000'/%3E%3C/svg%3E\");background-position:50%;background-repeat:no-repeat}.mini-suggest__popup-spacer{height:325px;left:0;position:absolute;top:100%;width:100%}.mini-suggest__item-age{color:rgba(84,96,122,.68);display:inline-block;font-size:9px;line-height:12px;margin-top:4px;overflow:hidden;text-overflow:ellipsis;vertical-align:middle;white-space:nowrap}.mini-suggest__item-warning-wrap{line-height:0;margin-top:2px}.mini-suggest__item-thumb_size_m~.mini-suggest__item-warning-wrap{padding-left:53px}.mini-suggest__item-thumb_size_m.mini-suggest__item-thumb_orientation_landscape~.mini-suggest__item-warning-wrap{padding-left:86px}.mini-suggest__item-thumb_size_s~.mini-suggest__item-warning-wrap{padding-left:48px}.mini-suggest__item-thumb_size_s.mini-suggest__item-thumb_orientation_landscape~.mini-suggest__item-warning-wrap{padding-left:77px}.mini-suggest__item-thumb_size_xs~.mini-suggest__item-warning-wrap{padding-left:45px}.mini-suggest__item-thumb_size_xs.mini-suggest__item-thumb_orientation_landscape~.mini-suggest__item-warning-wrap{padding-left:71px}.mini-suggest__item-thumb_size_xxs~.mini-suggest__item-warning-wrap{padding-left:24px}.mini-suggest__item_type_clipboard .mini-suggest__item-thumb_size_xxs~.mini-suggest__item-warning-wrap{padding-left:26px}.mini-suggest__item-warning{color:rgba(84,96,122,.68);font-size:9px;line-height:12px}.mini-suggest__item-warning_type_1,.mini-suggest__item-warning_type_2{background:rgba(0,0,0,.05);border-color:#f6f5f2;box-sizing:border-box;display:inline-block;margin-top:1px;min-width:45%;padding:0 3px;text-align:center}.mini-suggest__item-descr_size_sm{font-size:15px}.mini-suggest__item-descr_align_bottom{vertical-align:bottom}.mini-suggest__item-mark.mini-suggest__item-mark_type_direct{height:20px;margin-left:2px;vertical-align:top;width:12px}.mini-suggest__item-mark_type_direct{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='12' height='12' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M6 12.001a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm0-1a5 5 0 1 0-3.871-1.836l4.164-4.164H3.5v-1H8v4.5H7V5.708L2.836 9.872A4.98 4.98 0 0 0 6 11.001Z' fill='%23C4C2BE'/%3E%3C/svg%3E\")}.mini-suggest__item-descr_size_sm{font-size:14px}.mini-suggest__popup_theme_market{border-top:1px solid #e8e8e8;box-sizing:border-box;padding-top:8px}.mini-suggest__popup.mini-suggest__popup_theme_market:after{background-color:#fff;border-radius:0;border-top:0}.mini-suggest__popup_theme_market .mini-suggest__popup-content{padding:0 20px 0 12px}.mini-suggest__popup_theme_market .mini-suggest__item_type_tpah{background-color:#e8e8e8;border-radius:4px;box-shadow:none;font-size:16px;font-weight:500;line-height:20px;padding:12px 16px}.mini-suggest__popup_theme_market .mini-suggest__item_type_fulltext{font-size:16px;font-weight:400;line-height:24px}.mini-suggest__item_type_fulltext+.mini-suggest__divider{margin-top:8px}.mini-suggest__popup_theme_market .mini-suggest__item-link,.mini-suggest__popup_theme_market .mini-suggest__item_type_fulltext{padding:10px 20px 11px}.mini-suggest__popup_theme_market .mini-suggest__item-button{opacity:.4;right:5px}.mini-suggest__popup_theme_market .mini-suggest__item_type_tpah+.mini-suggest__item:not(.mini-suggest__item_type_tpah){margin-top:8px}.mini-suggest__popup_theme_market .mini-suggest__item:not(.mini-suggest__item_type_tpah){background:transparent;border-radius:0;margin:0 -20px 0 -12px;z-index:2}.mini-suggest__popup_theme_market .mini-suggest__item:not(.mini-suggest__item_type_tpah):active{background:#fef5da}.mini-suggest__popup_theme_market .mini-suggest__item_type_nav .mini-suggest__item-content{box-sizing:border-box;display:inline-flex;flex-direction:column;justify-content:center;min-height:40px;width:100%}.mini-suggest__popup_theme_market .mini-suggest__item_type_nav .mini-suggest__item-title{color:#333;font-size:16px;font-weight:400}.mini-suggest__popup_theme_market .mini-suggest__item_type_nav .mini-suggest__item-title:active{color:#333}.mini-suggest__popup_theme_market .mini-suggest__item_type_nav .mini-suggest__item-info{color:#999;font-size:14px;max-width:100%}.mini-suggest__popup_theme_market .mini-suggest__item_type_nav .mini-suggest__item-thumb_size_m{height:44px;margin-right:-44px;width:44px}.mini-suggest__popup_theme_market .mini-suggest__item_type_nav .mini-suggest__item-thumb_size_m+.mini-suggest__item-content{padding-left:57px}.mini-suggest__popup_theme_market .mini-suggest__item_type_nav.mini-suggest__item_subtype_ecom-article .mini-suggest__item-info,.mini-suggest__popup_theme_market .mini-suggest__item_type_nav.mini-suggest__item_subtype_ecom-article .mini-suggest__item-title,.mini-suggest__popup_theme_market .mini-suggest__item_type_nav.mini-suggest__item_subtype_ecom-item .mini-suggest__item-title{-webkit-box-orient:vertical;-webkit-line-clamp:2;display:-webkit-box;overflow:hidden;white-space:normal}.mini-suggest__popup_theme_market .mini-suggest__item_type_nav.mini-suggest__item_subtype_ecom-brand,.mini-suggest__popup_theme_market .mini-suggest__item_type_nav.mini-suggest__item_subtype_ecom-brand-category,.mini-suggest__popup_theme_market .mini-suggest__item_type_nav.mini-suggest__item_subtype_ecom-category,.mini-suggest__popup_theme_market .mini-suggest__item_type_nav.mini-suggest__item_subtype_ecom-category-brand,.mini-suggest__popup_theme_market .mini-suggest__item_type_nav.mini-suggest__item_subtype_ecom-shop{min-height:65px}.mini-suggest__popup_theme_market .mini-suggest__item_type_nav.mini-suggest__item_subtype_ecom-shop .mini-suggest__item-link{display:flex}.mini-suggest__popup_theme_market .mini-suggest__item_type_nav.mini-suggest__item_subtype_ecom-shop .mini-suggest__item-thumb{flex-shrink:0;margin-left:10px;margin-right:0;order:2;width:130px}.mini-suggest__popup_theme_market .mini-suggest__item_type_nav.mini-suggest__item_subtype_ecom-shop .mini-suggest__item-content{flex-grow:1;min-width:0;padding:0;width:auto}"),window.MBEM=window.MBEM||{},a.prototype.stopPropagation=function(){this.propagationStopped=!0},r.prototype.on=function(t,e,i){if("object"==typeof t){for(var s in t)t.hasOwnProperty(s)&&this.on(s,t[s],e);return this}var n=this._handlerStorage||(this._handlerStorage={});return(n[t]||(n[t]=[])).push({fn:e,ctx:i}),this},r.prototype.un=function(t,e){if("object"==typeof t){for(var i in t)t.hasOwnProperty(i)&&this.un(i,t[i]);return this}for(var s=this._handlerStorage||(this._handlerStorage={}),n=s[t]||(s[t]=[]),o=0;o<n.length;++o)if(n[o].fn===e)return n.splice(o,1),this;return this},r.prototype.trigger=function(t,e){for(var i=new a(t),s=this._handlerStorage||(this._handlerStorage={}),n=s[t]||(s[t]=[]),o=0;o<n.length;++o){var r,_=n[o];if(!1===(r=_.fn.call(_.ctx||this,i,e))&&i.stopPropagation(),i.propagationStopped)break}return r},MBEM.Observable=r,MBEM.arrayFrom=function(t){return Array.prototype.slice.call(t)},n=/\s+/,MBEM.cls={list:function(t){return t.split(n).filter(Boolean)},contains:function(t,e){return-1<MBEM.cls.list(t.getAttribute("class")||"").indexOf(e)},add:function(t,e){var i=MBEM.cls.list(t.getAttribute("class")||"");return-1===i.indexOf(e)&&i.push(e),t.setAttribute("class",i.join(" ")),this},remove:function(t,e){var i=MBEM.cls.list(t.getAttribute("class")||""),e=i.indexOf(e);return-1<e&&i.splice(e,1),t.setAttribute("class",i.join(" ")),this},toggle:function(t,e,i){return void 0===i&&(i=!MBEM.cls.contains(t,e)),MBEM.cls[i?"add":"remove"](t,e)}},MBEM.extend=function(t,e){for(var i in e){var s;e.hasOwnProperty(i)&&((s=e[i])instanceof Element||s instanceof Array||s instanceof Date||"object"!=typeof s||null===s?t[i]=s:(t[i]=t[i]||{},MBEM.extend(t[i],s)))}return t},function(){var i="__uniqMBEM"+Math.random().toString().substr(2,5),p=MBEM.blocks={};MBEM.prototype=Object.create(MBEM.Observable.prototype),MBEM.prototype.getDefaultParams=function(){return{}};var n=MBEM._propListeners="__uniqMBEMListeners"+Math.random().toString().substr(2,5);function t(){}MBEM.prototype.bindTo=function(t,e,s){return"function"==typeof e&&(s=e,e=t,t=this.domElem),"string"==typeof t?t=this.elem(t):Array.isArray(t)||(t=[t]),e.split(" ").forEach(function(i){t.forEach(function(t){var e=s.bind(this);e.origHandler=s,t[n]||(t[n]={}),t[n][i]||(t[n][i]=[]),t[n][i].push(e),t.addEventListener(i,e)},this)},this),this},MBEM.prototype.elem=function(t,e,i){var s=[],t=t.split(" ").map(function(t){t=this.__self.className(t,e,i);return MBEM.cls.contains(this.domElem,t)&&s.push(this.domElem),"."+t},this).join(",");return s.concat(MBEM.arrayFrom(this.domElem.querySelectorAll(t)))},MBEM.override=function(i,s){return"function"==typeof s&&-1<s.toString().indexOf("__base")?(i=i||t,function(){var t=this.__base;this.__base=i;var e=s.apply(this,arguments);return this.__base=t,e}):s},MBEM.staticProto={},MBEM.staticProto.className=function(t,e,i){var s=this._name;return t&&(s+="__"+t),void 0!==e&&!1!==i&&(s+="_"+e+(!0!==i&&void 0!==i?"_"+i:"")),s},MBEM.decl=function(t,e,i){e=e||{};var s,n,o,r,_,a,u=!1;for(a in"object"==typeof t&&t.baseBlock?(u=!0,_=t.baseBlock,t=t.block):_=t,_ in p?(n=p[_].prototype,s=o=p[_]):(u=!0,n=MBEM.prototype,o=MBEM.staticProto),u&&(n=Object.create(n),(s=function(t){this.__internalConstructor(t),this.__constructor(t),this.__afterConstructor(t)}).prototype=n,((s.prototype.constructor=s).prototype.__self=s)._name=t,p[t]=s),e)e.hasOwnProperty(a)&&(n[a]=MBEM.override(n[a],e[a]));for(r in o)i&&i.hasOwnProperty(r)||s[r]||(s[r]=o[r]);if(i)for(r in i)i.hasOwnProperty(r)&&(s[r]=MBEM.override(o[r],i[r]));return s},MBEM.getBlock=function(t,e){return t[i]&&t[i][e]},MBEM.consoleError=function(){if(window.console&&window.console.error)try{window.console.error.apply(window.console,arguments)}catch(t){}},MBEM.prototype.__internalConstructor=function(t){t=t||{},this.domElem=t.node,this.params=MBEM.extend(this.getDefaultParams(),t.params||{}),t.node&&((t.node[i]||(t.node[i]={}))[this.__self._name]=this)},MBEM.prototype.__constructor=function(){},MBEM.prototype.__afterConstructor=function(){},MBEM.initBlockFromNode=function(t,e,i){var s;return(s=MBEM.getBlock(t,e))?s:(i=i||MBEM.getNodeParams(t)[e],MBEM._createBlockFromNode({node:t,block:e,params:i}))},MBEM.createBlock=function(t){return p[t.block]?new p[t.block](t):void MBEM.consoleError("Block is not declared",t.block)},MBEM._createBlockFromNode=MBEM.createBlock,MBEM.getNodeParams=function(t){var e;try{e=JSON.parse(t.getAttribute("data-bem"))||{}}catch(e){return void MBEM.consoleError("Incorrect params",t)}return e}}(),Function.prototype.bind||(Function.prototype.bind=function(e){var i=this,s=MBEM.arrayFrom(arguments).slice(1);return function(){var t=MBEM.arrayFrom(arguments);return i.apply(e,s.concat(t))}}),MBEM.decl("mini-suggest",{__constructor:function(){this.__base.apply(this,arguments),this._prevRequestText=null,this._focused=!1,this._empty=!0,this._opened=!1,this._isShown=!1,this._spaceCreated=!1,this._setElements(),this._syncVal(),this._bindHandlers(),setTimeout(function(){document.activeElement===this._input&&this._onInputFocus()}.bind(this),0)},_setElements:function(){this._input=this.domElem},_bindHandlers:function(){this.bindTo(this._input,"focus",MBEM.eventProxy("_onInputFocus",this)).bindTo(this._input,"blur deactivate",MBEM.eventProxy("_onInputBlur",this)).bindTo(this._input,"input",MBEM.eventProxy("_onInput",this)),this.on("item-click",MBEM.eventProxy("_onItemClick",this)),9===document.documentMode&&this.bindTo(document,"selectionchange",function(){document.activeElement===this._input&&this._onInput()}),this.bindTo(window,"pageshow",MBEM.eventProxy("_onPageShow",this))},_onInputFocus:function(){this._focused=!0,this._opened||this._openSuggest()},_openSuggest:function(){this._fixScrollTop(),this._update(),this._checkAndShowPopup(),this._opened=!0,this._startInput()},_startInput:function(){this._inputStarted||(this._inputStarted=!0,this.trigger("start-input"))},_stopInput:function(){this._inputStarted=!1},_onBeforeInputChange:function(t){this._spaceCreated="tpah"===t.type||"arrow"===t.type},_onInputBlur:function(){this._focused=!1,this._opened&&!this.params.preventCloseOnBlur&&this._closeSuggest()},_closeSuggest:function(t){this._opened=!1,this._focused&&!t&&this._blur(),this._checkAndHidePopup()},_onInput:function(t){this._input.value!==this._val&&(this._spaceCreated=!1,this._syncVal(),this._focused&&!this._opened&&t?this._openSuggest():this._update(),this.trigger("input-change",{type:"user"}))},_checkAndShowPopup:function(){this._shouldShowPopup()&&this._showPopup()},_shouldShowPopup:function(){return!this._isShown&&!this._empty},_showPopup:function(){this._createPopup(),MBEM.cls.add(this.domElem,"mini-suggest_open"),this.trigger("popup-show",{empty:this._empty}),this._isShown=!0},_checkAndHidePopup:function(){this._isShown&&this._hidePopup()},_hidePopup:function(){MBEM.cls.remove(this.domElem,"mini-suggest_open"),this.trigger("popup-hide"),this._isShown=!1},_update:function(t){!t&&this._prevRequestText===this._val||(this._prevRequestText=this._val,!this.params.skipEmptyRequest||this._val?this._request(this._val,this._onResponse):this._renderItems([]))},_onResponse:function(t,e,i){var s=this._processResponse(e),n=t===this._prevRequestText;this.trigger("response",{data:e,items:s,url:i.url,duration:i.duration,relevant:n,text:t}),n&&this._renderItems(s)},_processResponse:function(t){return this.params.responseAdapter?this.params.responseAdapter(t):t},_renderItems:function(t,e){this._createPopup(),t.length||this._showEmptyPopup()?this._renderItemsFilled(t,e):this._renderItemsEmpty(e),this._syncItems(t)},_showEmptyPopup:function(){return!1},_renderItemsFilled:function(t,e){this._popupContent.innerHTML=this._getItemsHTML(t),e||this.trigger("popup-update",{items:t}),this._empty=!1,this._opened&&this._checkAndShowPopup()},_renderItemsEmpty:function(t){this._popupContent.innerHTML="",t||this.trigger("popup-clear"),this._empty=!0,this._checkAndHidePopup()},_getItemsHTML:function(t){return t.reduce(this._renderItem.bind(this),"")},_renderItem:function(t,e,i){if(this.params.itemRenderer)return t+this.params.itemRenderer(e,i);var s=e[0];if(!this.__self.itemTypeIsSupported(s))return t;i=this._buildItem(e,i),e=this._buildItemContent(e,i);return i.linkAttrs&&(e=this._wrapItemLink(e,i.linkAttrs)),t+i.prefix+(e?"<"+i.tag+' class="'+i.className+'"'+this.__self.toHtmlAttrsString(i.attrs)+">"+e+"</"+i.tag+">":"")+i.suffix},_buildItem:function(t,e){return{tag:this.params.ignoreSemanticList?"div":"li",className:"mini-suggest__item mini-suggest__item_type_"+t[0],attrs:{"data-index":e,"data-type":t[0]},content:{},prefix:"",suffix:""}},_wrapItemLink:function(t,e){return"<a"+this.__self.toHtmlAttrsString(e)+">"+t+"</a>"},_createPopup:function(){if(this._popup)return!1;var t=this._popup=document.createElement("div");t.className=this._buildPopupClassList();var e=this._popupContent=document.createElement(this.params.ignoreSemanticList?"div":"ul");return e.className="mini-suggest__popup-content",e.setAttribute("role","listbox"),t.appendChild(e),this._appendPopup(t),this._popup},_buildPopupClassList:function(){return"mini-suggest__popup mini-suggest__popup_svg_"+(this.__self.hasSvg()?"yes":"no")},_appendPopup:function(t){MBEM.insertAfter(t,this._input)},_onPopupClick:function(t){var e,i,s=MBEM.closest(t.target,"mini-suggest__item");s&&(e=s.getAttribute("data-text"),"tpah"===(i=s.getAttribute("data-type"))?this._handleTpahClick(t,s,e):this.__self.itemTypeIsSearchable(i)?this._changeText(e,"suggest-item",!1,function(){this.trigger("item-click",this._getItemEventProps(s,i))}):this.__self.itemTypeIsNavigable(i)&&this._handleLinkItemClick(t,s,i,e))},_handleTpahClick:function(t,e,i){this._changeText(i+" ","tpah",!0,function(){this.trigger("item-tpah",{itemIndex:0|e.getAttribute("data-index"),val:i})})},_onItemClick:function(){this.params.resetOnSelect&&(this._renderItems([]),this._prevRequestText=null)},_syncVal:function(){var t=this._val;this._setVal(this._input.value),t!==this._input.value&&this.trigger("input-value-changed")},_syncItems:function(t){this._dataItems=t,this._items=MBEM.arrayFrom(this._popupContent.querySelectorAll(".mini-suggest__item"))},_removeItem:function(t){this._items.splice(this._items.indexOf(t),1)},_setVal:function(t){this._val=t,MBEM.cls.toggle(this.domElem,this.__self.className("","has-value","yes"),Boolean(this._val))},_setInputVal:function(t){this._input.value=t},_changeText:function(t,e,i,s){(i=void 0===i||i)&&this._onBeforeInputChange({type:e}),this._focusInputOnChangeText(i),this._setInputVal(t),this._syncVal(),this._moveCaret(),i&&(this._update(),this.trigger("input-change",{type:e})),s&&s.call(this)},_focusInputOnChangeText:function(){document.activeElement!==this._input&&this._input.focus()},_getMainUrlParams:function(t){var e={svg:this.__self.hasSvg()?1:0,part:t,pos:this._getCaretPosition()};return this._spaceCreated&&(e.space_created=1),this.params.getExtraUrlParams&&(e=MBEM.extend(e,this.params.getExtraUrlParams(t))),e},_getCaretPosition:function(){var t,e=this._val.length;return document.selection?((t=document.selection.createRange()).moveStart("character",-e),t.text.length):"number"==typeof this._input.selectionStart?this._input.selectionStart:e},_moveCaretToEnd:function(){var t,e=this._val.length;try{void 0!==this._input.createTextRange?((t=this._input.createTextRange()).collapse(!1),t.select()):"number"==typeof this._input.selectionStart&&(this._input.scrollLeft=999999,this._input.setSelectionRange(e,e))}catch(e){}},_moveCaretToStart:function(){try{this._input.scrollLeft=0,this._input.setSelectionRange(0,0)}catch(t){}},_moveCaret:function(){this._moveCaretToEnd()},_getItemEventProps:function(t,e,i,s){return{node:t,type:e,subtype:t.getAttribute("data-subtype"),byKeyboard:Boolean(s),itemIndex:0|t.getAttribute("data-index"),val:i||this._val}},_blur:function(){this._input.blur();try{document.activeElement&&document.activeElement.blur()}catch(t){MBEM.consoleError("No active element")}},_handleClick:function(){},_fixScrollTop:function(){window.pageYOffset<1&&(document.body.scrollTop=0)},_handleLinkItemClick:function(t,e,i,s){i&&(e=this._prepareClickedItemProps(e,i,s)),this._touchClick(t)||this.trigger("item-click",e),this._stopInput()},_prepareClickedItemProps:function(t,e,i){e=this._getItemEventProps(t,e,i);return"nav"===e.type&&(i="",this._dataItems[e.itemIndex][5]&&this._dataItems[e.itemIndex][5].type&&(i=this._dataItems[e.itemIndex][5].type),e.logExtend=i||"none"),e},_touchClick:function(t,e){return!("touchend"!==t.type||!t.defaultPrevented||((e||t.target).click(),0))},_onPageShow:function(t){t.persisted&&this._opened&&this._closeSuggest()}},{hasSvg:function(){return-1!==document.documentElement.className.indexOf("svg_yes")},toHtmlAttrsString:function(t){var e,i="";for(e in t)t.hasOwnProperty(e)&&(i+=" "+e+'="'+String(t[e]).replace(/"/g,"&quot;")+'"');return i},itemTypeIsSupported:function(t){return-1<["fulltext","tpah","nav","fact"].indexOf(t)},itemTypeIsNavigable:function(t){return"nav"===t},itemTypeIsSearchable:function(t){return-1<["fulltext","fact"].indexOf(t)}}),MBEM.decl("mini-suggest",{__constructor:function(){this._freezeClicks=0,this.__base.apply(this,arguments);var t=/(iPhone|iPad)(.*?OS (\d+)_)?/.exec(navigator.userAgent);this._isIos=Boolean(t),this._iosVersion=this._isIos?Number(t[3]):void 0},_openSuggest:function(){this.__base.apply(this,arguments),this._freezeClicks=Date.now()+500},_createPopup:function(){var t,e=this.__base.apply(this,arguments);return e&&(this._handleClick(this._popupContent,MBEM.eventProxy("_onPopupClick",this)),(t=document.createElement("div")).className="mini-suggest__popup-spacer",e.appendChild(t),this._handleClick(t,function(){this._closeSuggest()}.bind(this))),e},_getTouchCoords:function(t){var e=t.touches&&t.touches.length?t.touches:t.changedTouches,t=e&&e[0]||t;return{x:t.pageX||t.clientX||0,y:t.pageY||t.clientY||0}},_handleClick:function(i,s,n,o){var r=null,_=!1;return this.bindTo(i,"touchstart",function(t){r=this._getTouchCoords(t)}).bindTo(i,"touchmove",function(t){var e;!r||64<(t=(e=this._getTouchCoords(t)).x-r.x)*t+(e=e.y-r.y)*e&&(_=!0)}).bindTo(i,"touchend",function(t){var e;!r||_||n&&t.target!==i?_=!1:this._focused&&!o&&(t.preventDefault(),Date.now()>this._freezeClicks&&s)&&(s.call(this,t),(e=document.createEvent("MouseEvents")).initMouseEvent("mousedown",!0,!0,window,1,t.screenX,t.screenY,t.clientX,t.clientY,!1,!1,!1,!1,0,null),t.target.dispatchEvent(e))}).bindTo(i,"touchcancel",function(){r=null,_=!1}).bindTo(i,"mousedown",function(t){t.preventDefault()}).bindTo(i,"click",function(t){Date.now()>this._freezeClicks&&s&&!t.button&&s.call(this,t)}),this}}),MBEM.decl("mini-suggest",{_enrichUrl:function(t){var e=this.params.getExtraSuggestLinkParams&&this.params.getExtraSuggestLinkParams()||{};return e.suggest_reqid=this._currentClickReqid,MBEM.appendUrlParams(t,e)},_followLink:function(t){var e=t.getAttribute("target"),i=this._enrichUrl(t.href);"_self"===e?setTimeout(function(){window.location=i},0):((e=window.open("",e)).opener=null,e.location=i)},_handleLinkItemClick:function(t){this._currentClickReqid=this._reqID,this.__base.apply(this,arguments),t.target.href&&(t.preventDefault(),this._followLink(t.target))}},{hasSvg:function(){return!0}}),MBEM.decl("mini-suggest",{_onInputBlur:function(){this._focused=!1},_touchClick:function(){return!1},_renderItemsEmpty:function(){this._popupContent.innerHTML="",this.trigger("popup-clear"),this._empty=!0,this.params.hideOnEmptySearch&&!this._val&&this._checkAndHidePopup()},_shouldShowPopup:function(){return!this._isShown&&(!this.params.hideOnEmptySearch||this._val)}}),Date.now||(Date.now=function(){return(new Date).getTime()}),MBEM.offset=function(t){if(!t)return{top:0,left:0};var e=t.getBoundingClientRect(),t=document.documentElement.getBoundingClientRect();return{top:e.top-t.top,left:e.left-t.left}},MBEM.closest=function(t,e){for(;t&&t!==document;){if(MBEM.cls.contains(t,e))return t;t=t.parentNode}},MBEM.encodeUriComponent=function(e){try{return encodeURIComponent(e)}catch(t){e=e.replace(/[\ud800-\udbff](?![\udc00-\udfff])/g,"").replace(/([^\ud800-\udbff]|^)[\udc00-\udfff]/g,function(t){return t.slice(0,-1)});try{return encodeURIComponent(e)}catch(t){throw new URIError("Невозможно зашифровать строку: "+e)}}},MBEM.appendUrlParams=function(t,e){return t+(-1<t.indexOf("?")?"&":"?")+Object.keys(e).map(function(t){return t+"="+MBEM.encodeUriComponent(e[t])}).join("&")},MBEM.throttle=function(i,s,n){var o,r,_,a=null,u=0;n=n||{};function p(){u=!1===n.leading?0:(new Date).getTime(),a=null,_=i.apply(o,r),a||(o=r=null)}return function(){var t=(new Date).getTime();u||!1!==n.leading||(u=t);var e=s-(t-u);return o=this,r=arguments,e<=0||s<e?(a&&(clearTimeout(a),a=null),u=t,_=i.apply(o,r),a||(o=r=null)):a||!1===n.trailing||(a=setTimeout(p,e)),_}},MBEM.insertAfter=function(t,e){"function"==typeof e.insertAdjacentElement?e.insertAdjacentElement("afterend",t):e.parentNode.insertBefore(t,e.nextSibling)},MBEM.encode=function(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},MBEM.resolveUrl=function(t,e){return"//"===t.substr(0,2)||"http://"===t.substr(0,7)||"https://"===t.substr(0,8)?t:"/"===t.substr(0,1)?document.location.origin+t:(e?"https":"http")+"://"+t},MBEM.eventProxy=function(t,e){return function(){return e[t].apply(e,arguments)}},MBEM.transitionendEvent=function(){var t,e=document.createElement("el"),i={transition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(t in i)if(void 0!==e.style[t])return i[t]},MBEM.prototype.__internalConstructor=MBEM.override(MBEM.prototype.__internalConstructor,function(t){if(this.__base.apply(this,arguments),t&&t.mods&&t.node){for(var e in this.__modsClassName="",t.mods)t.mods.hasOwnProperty(e)&&(this.__modsClassName+=this.__self.className("",e,t.mods[e])+" ");this.__modsClassName=this.__modsClassName.trim(),MBEM.cls.add(t.node,this.__modsClassName)}}),MBEM.prototype.getModsClassName=function(){return this.__modsClassName},MBEM.hl=function(s,t){t=t.reduce(function(t,e){var i=e[0],e=e[1];return i!==t.lastIndex&&(t.text+=MBEM.encode(s.slice(t.lastIndex,i))),t.text+="<b>"+MBEM.encode(s.slice(i,e))+"</b>",t.lastIndex=e,t},{text:"",lastIndex:0});return t.text+MBEM.encode(s.slice(t.lastIndex))},MBEM.capitalize=function(t){return t.charAt(0).toLocaleUpperCase()+t.substring(1)},MBEM.decl("mini-suggest",{__constructor:function(){this.params.counter&&this.on("submit",this._handleSubmit,this).on("request",this._handleRequest,this).on("response",this._handleResponse,this).on("start-input",this._handleStartInput,this).on("input-change",this._handleInputChange,this).on("popup-show",this._handlePopupShow,this).on("popup-update",this._handlePopupUpdate,this).on("item-click",this._handleItemClick,this).on("item-tpah",this._handleItemTpah,this).on("button-click",this._handleButtonClick,this).on("input-enter",this._handleInputEnter,this),this.__base.apply(this,arguments),this.params.counter&&this._clearCounters()},_handleInputEnter:function(){this._path.submit="keyboard"},_handleSubmit:function(){this._addAction("submit"),this._sendCounters()},_handleRequest:function(){++this._responses.rqs},_handleResponse:function(t,e){var i=Date.now();++this._responses.rsp,e.items.length||++this._responses.ersp,!e.relevant&&e.items.length&&++this._responses.lrsp,void 0!==e.duration&&(this._params.times+=(this._params.times?".":"")+e.duration),this._cachedUrls[e.url]&&i-this._cachedUrls[e.url]<6e4&&++this._responses.cchd,e.url&&(this._cachedUrls[e.url]=i),e.items.length&&(this._lastRenderTime=i),this._meta=e.data[2]||{}},_handlePopupUpdate:function(t,e){++this._responses.rndr,this._lastRenderTime&&(this._params.render_times+=(this._params.render_times?".":"")+(Date.now()-this._lastRenderTime),this._lastRenderTime=null),this._countItemTypes(e.items)},_handlePopupShow:function(){this._changePathState("not_used")},_handleItemClick:function(t,e){var i=e.node.getAttribute("data-log-type")||("nav"===e.type?"nav":e.personal?"history":"phrase");e.personal&&(this._path.personal="nah_used"),this._addAction(i,{index:e.itemIndex+1,extend:e.logExtend}),this._changePathState(e.byKeyboard?"keyboard":"mouse")&&(this._path.index=e.itemIndex+1),this._path.submit=e.byKeyboard?"keyboard":"click_by_mouse",++this._ratio.actionsCount,this.__self.itemTypeIsNavigable(e.type)&&(this._navigableText=e.val,this._sendCounters())},_handleItemTpah:function(t,e){this._changePathState("tpah"),this._path.index=0,this._addAction("word",{index:e.itemIndex+1}),++this._ratio.actionsCount,++this._responses.clks},_handleButtonClick:function(){++this._ratio.actionsCount,this._changePathState("suggest"),this._path.submit="button_by_mouse"},_handleInputChange:function(t,e){var i=Date.now();this._changePathState("edit"),this._path.index=0,"user"!==e.type&&"clear"!==e.type&&"tpah"!==e.type||(this._firstChangeTime=this._firstChangeTime||i,this._lastChangeTime=i),++this._ratio.actionsCount,"user"===e.type?0<(i=this._input.value.length-this._prevVal.length)?this._addAction("add",{diffLength:i}):this._addAction("del",{diffLength:i}):"clear"===e.type&&this._addAction("clear"),"nah_used"===this._path.personal&&(this._path.personal="nah_not_used"),this._prevVal=this._input.value},_handleStartInput:function(){this._startInputTime=this._startInputTime||Date.now()},_changePathState:function(t){switch(t){case"not_used":if("not_shown"!==this._path.state)return!1;break;case"mouse":case"keyboard":case"tpah":if("edit"===this._path.state)return!1;break;case"edit":if("not_shown"===this._path.state||"not_used"===this._path.state)return!1;break;case"suggest":if("keyboard"!==this._path.state)return!1}return this._path.state=t,!0},_addAction:function(t,e){var i=Date.now(),e=e||{};!this._isReqIDAttached&&this._reqID&&this._attachReqID(),this._firstActionTime=this._firstActionTime||i,e.time=i-this._firstActionTime,e.name=t,this._tpah.push(e)},_sendCounters:function(){var t=this._getCounterUrl();this._clearCounters(),this._sendStatUrl(t)},_sendStatUrl:function(t){t+=(-1<t.indexOf("?")?"&":"?")+"_="+Date.now(),MBEM.sendBeacon(t," ")||MBEM.ajax(t)},_clearCounters:function(){this._params={times:"",render_times:""},this._path={service:this.params.counter.service,state:"not_shown",index:0,personal:"nah_not_shown",submit:"button_by_mouse"},this._ratio={len:0,queryLen:0,actionsCount:0},this._firstChangeTime=null,this._lastChangeTime=null,this._startInputTime=null,this._reqID=this.__self._generateReqID(this.params.counter.yandexuid),this._isReqIDAttached=!1,this._tpah=[],this._firstActionTime=0,this._prevVal=this._input.value,this._startValLength=this._input.value.length,this._responses={rqs:0,rsp:0,rndr:0,ersp:0,lrsp:0,clks:0,cchd:0},this._typeCounts={},this._cachedUrls={},this._lastRenderTime=0,this._meta={},this._navigableText=null},_attachReqID:function(){this._appendHiddenInput("suggest_reqid",this._reqID),this._isReqIDAttached=!0},_getCounterUrl:function(){return this.params.counter.url+"/"+this._getCounterUrlParams().join("/").replace(/(\/+)/g,"/")},_getParamsList:function(){return[{text:this._navigableText||this._input.value,pos:this._getCaretPosition(),type_counts:JSON.stringify(this._typeCounts)},this.params.counter.params,this._getPath(),this._params,this._getRatio(),this._getChangeTimes(),this._getSession(),this._responses,{suggest_reqid:this._reqID},this._getTpah(),this._getMeta(),this._getExtraCounterParams()]},_getPath:function(){return{path:[this._path.service,this._path.state,"p"+this._path.index,this._path.personal,this._path.submit].join(".")}},_getRatio:function(){var t=this._startValLength+this._tpah.reduce(function(t,e){return"add"===e.name||"del"===e.name?t+(e.diffLength||0):t},0);return{ratio:[0<=t?t:this._input.value.length,this._input.value.length,this._ratio.actionsCount].join(".")}},_getChangeTimes:function(){var t=Date.now();return{since_first_change:t-(this._firstChangeTime||t),since_last_change:t-(this._lastChangeTime||t),total_input_time:t-(this._startInputTime||t)}},_getSession:function(){return{session:Date.now()+Math.round(1e4*Math.random())}},_getTpah:function(){return{tpah_log:"["+this._tpah.map(function(t){var e=[t.name,"p"+(t.index||0),t.time];return void 0!==t.diffLength&&e.push(t.diffLength),t.extend&&e.push(t.extend),"["+e.join(",")+"]"}).join(",")+"]"}},_getCounterUrlParams:function(){return this._getParamsList().concat({"*data":"url="+document.location.origin}).reduce(function(t,e){return t.concat(this._getParams(e))}.bind(this),[]).concat(["/"])},_getParams:function(i){return Object.keys(i).reduce(function(t,e){return""===i[e]||t.push(e+"="+MBEM.encodeUriComponent(i[e]).replace(/%5B/g,"[").replace(/%5D/g,"]").replace(/%2C/g,",").replace(/\*/g,"%2A")),t},[])},_getMainUrlParams:function(){var t=this.__base.apply(this,arguments);return this._reqID&&(t.suggest_reqid=this._reqID),t},_countItemTypes:function(t){t.forEach(function(t){t=this._getItemType(t);t&&this._incTypeCount(t)},this)},_getItemType:function(t){var e,i;return Array.isArray(t)&&(t[5]&&t[5].personal?e="pers":(e=t[0],i=t[5]&&t[5].type)),i&&(e+="_"+i),e},_incTypeCount:function(t,e){this._typeCounts[t]=(this._typeCounts[t]||0)+(e||1),-1<t.indexOf("pers")&&"nah_not_shown"===this._path.personal&&(this._path.personal="nah_not_used")},_getMeta:function(){var t,e={};for(t in this.__self.metaProps)e[this.__self.metaProps[t]]=this._meta[t]||"";return e},_getExtraCounterParams:function(){return this.params.counter.getExtraUrlParams?this.params.counter.getExtraUrlParams():{}}},{_generateReqID:function(t){return(t=t||this._random(9)+this._random(9))+Date.now().toString().slice(-7)+this._random(7)},_random:function(t){return Math.random().toString().slice(2,Math.min(t,10)+2)},metaProps:{exprt:"exprt",r:"region",log:"log"}}),MBEM.decl("mini-suggest",{_getMeta:function(){var t=this.__base.apply(this,arguments);return t.log||(t.log=this._buildLog()),t},_addAction:function(t,e){this.__base("nav"===t?"phrase":t,e)},_buildLog:function(){return this._dataItems&&this._dataItems.length?this._dataItems.reduce(function(t,e){return"tpah"===e[0]?t+="Word":"fulltext"===e[0]?t+="Text":"nav"===e[0]&&e[5]?t+=this._buildNavLogRecord(e[5]):"filter"===e[0]&&(t+="Filter"),t}.bind(this),"sgtype:"):""},_buildNavLogRecord:function(t){var e=t.type;return"ecom-item"===t.type&&(e="ecom-model"),t.search_request&&(e+="-search"),MBEM.capitalize(e)}}),t="XDomainRequest"in window?XDomainRequest:XMLHttpRequest,o={},MBEM.ajax=function(i,s){s=s||{};var n=new t;return o[i]=Date.now(),n.open("get",i,!0),n.withCredentials=!0,n.onreadystatechange=function(){if(4===n.readyState)if(200===n.status)try{s.successCallback&&s.successCallback.call(s.ctx,JSON.parse(n.responseText),{url:i,duration:(e=0,o[t=i]&&(e=Date.now()-o[t]),o[t]=null,e)})}catch(t){MBEM.consoleError("Incorrect suggestions JSON")}else s.errorCallback&&s.errorCallback(n.status,n.statusText,n.responseText);var t,e},s.timeout&&(n.timeout=s.timeout),n.send(),function(){n.abort()}},MBEM.sendBeacon=(s="sendBeacon"in navigator&&-1===(navigator.userAgent||"").indexOf("UCBrowser"),function(t,e){return s&&navigator.sendBeacon(t,e)}),e=MBEM.blocks,i=MBEM.decl,MBEM.decl=function(s,n,t){if(n=n||{},"object"==typeof s&&s.modName){var o,r=(s.block in e?e[s.block]:MBEM).prototype;for(o in n)n.hasOwnProperty(o)&&"function"==typeof n[o]&&function(){var t=s,e=r[o],i=n[o];n[o]=function(){return this._simpleCheckMod(t.modName,t.modVal)?i.apply(this,arguments):e&&this.__base?e.apply(this,arguments):void 0}}();s=s.block}return i(s,n,t)},MBEM.prototype.__internalConstructor=MBEM.override(MBEM.prototype.__internalConstructor,function(t){this._modCache=t&&t.mods||this._extractInitMods(t),this.__base.apply(this,arguments)}),MBEM.prototype._extractInitMods=function(t){var e={};if(!t||!t.node)return e;for(var i,s,n=MBEM.cls.list(t.node.getAttribute("class")||""),o=this.__self._name+"_",r=0;r<n.length;++r)0===n[r].indexOf(o)&&(-1<(s=(i=n[r].substring(o.length)).indexOf("_"))?e[i.substring(0,s)]=i.substring(s+1):e[i]=!0);return e},MBEM.prototype._simpleCheckMod=function(t,e){return void 0===e?Boolean(this._modCache[t]):this._modCache[t]===e},MBEM.decl({block:"mini-suggest",modName:"direct",modVal:"yes"},{__constructor:function(){this.__base.apply(this,arguments),this.params.counter&&this.on("adb",this._handleAdb,this)},_handleAdb:function(t,e){++this._adb.adr,e&&e.hidden&&(++this._adb.adh,this._adbe()&&++this._adb.adhb)},_clearCounters:function(){this.__base.apply(this,arguments),this._adb={adr:0,adh:0,adhb:0}},_getParamsList:function(){var t=this.__base();return t.push(this._adb),t},_adbe:function(){return this.params.direct.adb}}),MBEM.decl({block:"mini-suggest",modName:"direct",modVal:"yes"},{_addAction:function(t,e){e&&e.isAd&&(t="ad"),this.__base(t,e)},_buildNavLogRecord:function(t){var e=this.__base.apply(this,arguments);return t.isAd&&(e+="-ad"),e},_getItemType:function(t){var e=this.__base.apply(this,arguments);return t[5]&&t[5].isAd&&(e=e.replace(t[0],"ad")),e}}),MBEM.decl("mini-suggest",{_buildItem:function(t){var e=this.__base.apply(this,arguments),i=t[0],s=t[1],n=t[3],o=t[4],r=t[5];return"tpah"===i&&r&&r.tpah&&(s=s.slice(r.tpah[0],r.tpah[2])),e.content.title=MBEM.encode(s),e.content.info=n&&MBEM.encode(n),e.attrs.role="option",e.attrs["data-text"]=MBEM.encode(this._getItemText(t)),o&&(e.linkAttrs={href:MBEM.resolveUrl(o),target:MBEM.encode(t[5]&&t[5].target||"_blank"),rel:"noopener",class:"mini-suggest__item-link"}),r&&r.next&&(e.className+=" mini-suggest__item_next_"+r.next),e},_getItemText:function(t){var e=t[0],i=t[1],s=t[3],t=t[5];return t&&(t.searchQuery||t.suggestion)||"nav"===e&&this._val||("fact"!==e||t&&t.inline?i:s)},_buildItemContentTitle:function(t,e){return e.content.title||""},_buildItemContentInfo:function(t,e){return e.content.info||""},_buildItemContentButton:function(t,e){return e.content.button?'<span class="mini-suggest__'+e.content.button+' mini-suggest__item-button"></span>':""},_buildItemContentAdds:function(){return""}}),MBEM.decl("mini-suggest",{_buildItemContentInfo:function(){var t=this.__base.apply(this,arguments);return t&&'<span class="mini-suggest__item-info">'+t+"</span>"},_buildItemContentTitle:function(t){var e=this.__base.apply(this,arguments);return e&&this._shouldWrapItemTitle(t)?'<span class="mini-suggest__item-title">'+e+"</span>":e},_shouldWrapItemTitle:function(t){return"nav"===t[0]||"fact"===t[0]}}),MBEM.decl("mini-suggest",{_shouldDivideItems:function(t,e){if(!e)return!1;var i=t[0],s=e[0],t=t[5],e=e[5];return-1===["tpah","group_title"].indexOf(s)&&(i!==s||(t||{}).type!==(e||{}).type)},_renderItem:function(t,e,i,s){return this._shouldDivideItems(e,s[i-1])&&(t+='<li class="mini-suggest__divider" aria-hidden="true"></li>'),this.__base(t,e,i)},_getItemText:function(t){return"nav"===t[0]?t[1]:this.__base.apply(this,arguments)}}),MBEM.decl("mini-suggest",{_shouldAddArrow:function(t){return t[5]&&-1<["ecom-category","ecom-brand","ecom-brand-category","ecom-category-brand","ecom-shop"].indexOf(t[5].type)},_buildItem:function(t){var e=this.__base.apply(this,arguments);return this._shouldAddArrow(t)&&(e.className+=" mini-suggest__item_with-arrow"),e}}),MBEM.decl("mini-suggest",{_buildItem:function(t){var e,i,s,n=this.__base.apply(this,arguments),o=t[0],r=t[5];return r&&(e=r.descr,i=r.mark,s=r.icon,t=r.type,i&&(n.content.mark=this._buildItemMark(i,n)),e&&(n.content.descr=this._buildItemDescr(e)),t&&(n.className+=" mini-suggest__item_subtype_"+t),s&&(n.content.icon='<span class="mini-suggest__item-icon mini-suggest__item-icon_size_'+MBEM.encode(s.size||"s")+'" style="background-image:url('+MBEM.encode(s.url)+');"></span>'),"nav"!==o&&"fact"!==o||(n.content.wrapper=['<div class="mini-suggest__item-content">',"</div>"]),r.img&&(r.img.url||r.img.icon)&&(n.content.thumb=this._buildThumb(r)),"nav"===o&&r.monochrome&&(n.className+=" mini-suggest__item_monochrome")),n},_buildItemContent:function(t,e){return e.content.button&&(e.className+=" mini-suggest__item_with-button"),(e.content.thumb||"")+(e.content.wrapper&&e.content.wrapper[0]||"")+this._buildItemContentMain(t,e)+(e.content.wrapper&&e.content.wrapper[1]||"")},_buildThumb:function(t){var e=this._buildThumbClass(t),i="",s="",n="";return t.img.badge&&!t.img.round&&(n+='<div class="mini-suggest__item-thumb-badge"',t.img.badgeColor&&(n+=' style="background-color:'+MBEM.encode(t.img.badgeColor)+';color:#333;"'),n+=">"+MBEM.encode(t.img.badge)+"</div>"),s+=t.img.color?"background-color:"+MBEM.encode(t.img.color)+";":"",'<div class="mini-suggest__item-thumb'+e+'"'+(i+=(s+=t.img.url?"background-image:url("+MBEM.encode(t.img.url)+");":"")?' style="'+s+'"':"")+">"+n+"</div>"},_buildThumbClass:function(t){var e=" mini-suggest__item-thumb_orientation_"+(t.img.aspect&&!t.img.round?MBEM.encode(t.img.aspect):"square");return e+=" mini-suggest__item-thumb_size_"+(t.img.size?MBEM.encode(t.img.size):"m"),e+=t.img.shade?" mini-suggest__item-thumb_shade":"",e+=t.img.contain?" mini-suggest__item-thumb_contain":"",e+=t.img.cover?" mini-suggest__item-thumb_cover":"",(e+=t.img.round?" mini-suggest__item-thumb_round":"")+(t.img.icon?" mini-suggest__item-thumb_icon_"+t.img.icon:"")},_buildItemDescr:function(t){return(t=Array.isArray(t)?t:[t]).map(function(t){return t?'<span class="mini-suggest__item-descr">'+MBEM.encode(t)+"</span>":""}).join("")},_buildItemMark:function(t,e){return t=Array.isArray(t)?t:[t],-1===e.className.indexOf("mini-suggest__item_mark_yes")&&(e.className+=" mini-suggest__item_mark_yes"),t.map(function(t){return t?'<span class="mini-suggest__item-mark mini-suggest__item-mark_type_'+MBEM.encode(t)+'"></span>':""}).join("")},_buildItemContentAdds:function(t,e){return(e.content.mark||"")+(e.content.descr||"")}}),MBEM.decl("mini-suggest",{_buildItemContentMain:function(t,e){return this._buildItemContentTitle(t,e)+this._buildItemContentSubtitle(t,e)+this._buildItemContentButton(t,e)},_buildItemContentSubtitle:function(t,e){e=this._buildItemContentInfo(t,e)+this._buildItemContentAdds(t,e);return e&&'<div class="mini-suggest__item-line">'+e+"</div>"}}),MBEM.decl("mini-suggest",{_buildItemContentInfo:function(t,e){var i=t[5],t="";return i&&i.search_request&&(e.content.info=MBEM.encode(i.search_request),t=this._buildItemMark("search",e)),t+this.__base.apply(this,arguments)},_buildItem:function(t){var e=this.__base.apply(this,arguments),i=t[1],s=t[5];return t[4]&&(e.linkAttrs.href=t[4]),s&&(s.type&&(e.attrs["data-subtype"]=s.type),s.hl&&(e.content.title=MBEM.hl(i,s.hl))),e}}),MBEM.decl("mini-suggest",{_buildThumbClass:function(t){var e=this.__base.apply(this,arguments);return t.img&&(e+=t.img.blurred?" mini-suggest__item-thumb_blurred":""),e}}),MBEM.decl("mini-suggest",{clear:function(){this._onClearClick()},close:function(){this._input.blur(),this._closeSuggest()},sync:function(){this._syncVal(),this._reload()},invalidate:function(){this._prevRequestText=void 0,this._reload()},submit:function(t){this._onSubmitClick(t)},_reload:function(){this._isShown?this._update():this._renderItemsEmpty()}}),MBEM.decl({block:"mini-suggest",modName:"personal",modVal:"yes"},{__constructor:function(){this.__base.apply(this,arguments),this._historyState=0,this._transitionendEvent=MBEM.transitionendEvent(),this._afterTransition=this._afterTransition.bind(this)},_onDeleteClick:function(t,e){MBEM.cls.add(e,"mini-suggest__item_hidden_yes"),e.addEventListener(this._transitionendEvent,this._afterTransition),setTimeout(function(){this._afterDelete(e)}.bind(this),350),MBEM.ajax(this.params.deleteUrl+MBEM.encodeUriComponent(e.getAttribute("data-text"))),this._historyState+=1},_afterDelete:function(t){var e=t.parentNode;e&&(e.removeChild(t),this._removeItem(t),0===e.childNodes.length&&this._update(!0))},_afterTransition:function(t){this._afterDelete(t.target)},_onPopupClick:function(t){var e=t.target;if(MBEM.cls.contains(e,"mini-suggest__delete")){t=MBEM.closest(e,"mini-suggest__item_personal_yes");if(t)return void this._onDeleteClick(e,t)}this.__base.apply(this,arguments)},_getMainUrlParams:function(){var t=this.__base.apply(this,arguments);return t.hs=this._historyState,t},_buildItem:function(t){var e=this.__base.apply(this,arguments);return"fulltext"===t[0]&&t[5]&&t[5].personal&&(e=this._personalExtend(e)),e},_personalExtend:function(t){return t.className+=" mini-suggest__item_personal_yes",t.attrs["data-personal"]=1,t.content.button="delete",t},_getItemEventProps:function(t){var e=this.__base.apply(this,arguments);return e.personal=Boolean(t.getAttribute("data-personal")),e}}),MBEM.decl({block:"mini-suggest",modName:"request"},{_prepareRequestUrl:function(t,e){t=MBEM.appendUrlParams(this.params.url,this._getMainUrlParams(t));return e&&(t=MBEM.appendUrlParams(t,e)),t}}),MBEM.decl({block:"mini-suggest",modName:"request",modVal:"xhr"},{_request:function(t,e,i){this.params.abortPrevXhr&&this._abortPrevXhr&&this._abortPrevXhr(),this._abortPrevXhr=MBEM.ajax(this._prepareRequestUrl(t),{successCallback:e.bind(this,t),errorCallback:i,ctx:this,timeout:this.params.xhrTimeout}),this.trigger("request",{text:t})}}),MBEM.decl({block:"mini-suggest",modName:"search",modVal:"yes"},{_setElements:function(){this.__base.apply(this,arguments),this._form=this.domElem,this._input=this.elem("input")[0],this._button=this.elem("button")[0],this._clear=this.elem("input-clear")[0]},_bindHandlers:function(){this.__base.apply(this,arguments),this._clear&&this._handleClick(this._clear,MBEM.eventProxy("_onClearClick",this)),this._button&&this._handleClick(this._button,MBEM.eventProxy("_onSubmitClick",this)),this.bindTo(this._form,"submit",MBEM.eventProxy("_onFormSubmit",this))},_doSubmit:function(){this._simpleCheckMod("submit-exp","yes")&&this._dispatchInternalSubmitEvent(),this._stopInput(),this._dispatchNativeSubmitEvent()},_dispatchInternalSubmitEvent:function(){this.trigger("submit")},_dispatchNativeSubmitEvent:function(){var t=document.createEvent("Event");t.initEvent("submit",!0,!0),!1!==this._form.dispatchEvent(t)?setTimeout(function(){this._form.submit()}.bind(this),0):this._startInput()},_onFormSubmit:function(){this._simpleCheckMod("submit-exp","yes")||this._dispatchInternalSubmitEvent(),this._blurAfterFormSubmit()},_blurAfterFormSubmit:function(){this._closeSuggest()},_onSubmitClick:function(t){t.preventDefault(),this.trigger("button-click"),setTimeout(this._doSubmit.bind(this),0)},_onClearClick:function(){document.activeElement!==this._input&&(this._renderItems([]),this._input.focus()),this._changeText("","clear")},_onItemClick:function(t,e){if(this.__base.apply(this,arguments),this.__self.itemTypeIsSearchable(e.type,e.subtype)){if(e.queryParams)for(var i in e.queryParams)this._appendHiddenInput(i,e.queryParams[i]);setTimeout(function(){this._doSubmit()}.bind(this),0)}},_getItemEventProps:function(t){var e=this.__base.apply(this,arguments),t=this._dataItems[t.getAttribute("data-index")][5];return t&&(e.queryParams=t.queryParams),e},_openSuggest:function(){MBEM.cls.add(document.body,"body_search_yes"),this.__base.apply(this,arguments)},_closeSuggest:function(){MBEM.cls.remove(document.body,"body_search_yes"),this.__base.apply(this,arguments)},_appendHiddenInput:function(t,e){var i=this._form[t];i||((i=document.createElement("input")).type="hidden",i.name=t,i.setAttribute("data-suggest","1"),this._form.appendChild(i)),i.value=e},_clearHiddenInputs:function(){for(var t=this._form.querySelectorAll("input[type=hidden][data-suggest]"),e=0;e<t.length;e++)t[e].remove()}}),MBEM.decl({block:"mini-suggest",modName:"search",modVal:"yes"},{_processResponse:function(t){var e,i=[],s=!1;t[2]&&i.push.apply(i,t[2].map(function(t){return["tpah",t[0],t[0],null,null,t[2]]}));var n=t[t.length-1];n&&!Array.isArray(n)&&(s=!0,n.suggestions&&(e=n.suggestions.map(function(t){return["fulltext",t[0],t[1],null,null,{personal:"Pers"===t[2].src}]})));for(var o=3;o<t.length-s;o++){var r=t[o];r&&r.length&&("fact"===r[0]&&3===r.length?i.push([r[0],r[2],r[2],r[1],null,{type:"short-fact"}]):i.push(r))}return e&&i.push.apply(i,e),i}}),MBEM.decl({block:"mini-suggest",modName:"search",modVal:"yes"},{_onItemClick:function(t,e){this.__base.apply(this,arguments),this.__self.itemTypeIsSearchable(e.type,e.subtype)&&(this._appendHiddenInput("suggest",1),this._appendHiddenInput("suggest_type","search"))}}),MBEM.decl("mini-suggest",{_onInputBlur:function(){this.__base.apply(this,arguments),15===this._iosVersion&&"visible"===document.visibilityState&&this._blur()}}),MBEM.decl({block:"mini-suggest",modName:"separate-popup",modVal:"yes"},{_bindHandlers:function(){this.__base.apply(this,arguments),this.bindTo(window,"orientationchange resize",this._repositionPopup.bind(this))},_createPopup:function(){if(this._popup)return!1;var t,e=this.__base.apply(this,arguments),i=this.params.popupMods,s=this.params.popupMix;for(t in i)if(i.hasOwnProperty(t)){var n=i[t];if(!n)continue;MBEM.cls.add(this._popup,"mini-suggest__popup_"+t+(!0===n?"":"_"+n))}if(s)for(var o=0;o<s.length;o++)MBEM.cls.add(this._popup,s[o]);return e},_appendPopup:function(t){(this.params.getPopupContainer&&this.params.getPopupContainer()||document.body).appendChild(t)},_repositionPopup:function(){this.__base.apply(this,arguments),this._popup&&(this._popup.style.top=MBEM.offset(this._input).top+this._input.offsetHeight+this.params.popupOffset+"px")},_showPopup:function(){this.__base.apply(this,arguments),MBEM.cls.add(this._popup,"mini-suggest__popup_visible"),this._repositionPopup()},_hidePopup:function(){this._isShown&&(this.__base.apply(this,arguments),MBEM.cls.remove(this._popup,"mini-suggest__popup_visible"))},getDefaultParams:function(){var t=this.__base.apply(this,arguments);return t.popupOffset=0,t}}),MBEM.decl({block:"mini-suggest",modName:"separate-popup",modVal:"yes"},{_repositionPopup:function(){this._popup&&!this._popup.style.top&&(this._popup.style.top=this.params.popupOffset+"px",this._popup.style.minHeight="calc(100vh - "+this._popup.style.top+")")}}),MBEM.decl({block:"mini-suggest",modName:"hide-keyboard",modVal:"yes"},{_onInputBlur:function(){this._freezeSuggest?(this._freezeSuggest=!1,this._blurEventSkipped=!0):this.__base.apply(this,arguments)},_createPopup:function(){var t=this.__base.apply(this,arguments);return t&&this._addHideKeyboardActivator(this._popup),t},_addHideKeyboardActivator:function(t){this._handleLongTapOrMove(t,function(){this._focused&&document.activeElement===this._input&&(this._freezeSuggest=!0,this._blur(),this.trigger("keyboard-closed"))}.bind(this))},_handleLongTapOrMove:function(t,i){var s,e;this.bindTo(t,"touchstart",function(t){s=this._getTouchCoords(t),e=setTimeout(i,500)}).bindTo(t,"touchmove",function(t){var e;!s||64<(t=(e=this._getTouchCoords(t)).x-s.x)*t+(e=e.y-s.y)*e&&i()}).bindTo(t,"touchend",function(){clearTimeout(e)})},_blur:function(){this._focused&&document.activeElement!==this._input?(this._freezeFocus=0,this._blurEventSkipped&&(this._blurEventSkipped=!1,this._onInputBlur()),this._opened&&this._closeSuggest()):this.__base.apply(this,arguments)}}),MBEM.decl({block:"mini-suggest",modName:"save-history",modVal:"yes"},{_onFormSubmit:function(){this._addToSuggestHistory(this._val),this.__base.apply(this,arguments)},_handleLinkItemClick:function(t,e,i,s){this._addToSuggestHistory(s),this.__base.apply(this,arguments)},_addToSuggestHistory:function(t){this.params.addToHistory?this.params.addToHistory(t):this.params.addToHistoryUrl&&MBEM.ajax(this.params.addToHistoryUrl+MBEM.encodeUriComponent(t))}}),MBEM.decl({block:"mini-suggest",modName:"direct",modVal:"yes"},{_buildItem:function(t){var e=this.__base.apply(this,arguments),t=t[5];return t&&"ad"===t.type&&(e.className=e.className.replace(" mini-suggest__item_subtype_ad","")),e},_buildItemContent:function(t,e){return this.__base.apply(this,arguments)+(e.content.warn||"")}}),MBEM.decl({block:"mini-suggest",modName:"direct",modVal:"yes"},{_buildItem:function(t){var e,i=this.__base.apply(this,arguments),s=t[5];return s&&this._isDirect(s)&&(e=i.content,t=s.warnlen?" mini-suggest__item-warning_type_"+s.warnlen:"",i.content.descr=this._buildDirectLabel(s,i),s.warn&&(e.warn='<div class="mini-suggest__item-warning-wrap"><div class="mini-suggest__item-warning'+t+'">'+MBEM.encode(s.warn.replace(/&quot;/g,'"'))+"</div></div>")),i},_buildDirectLabel:function(t){var e=this.params.direct.label;return t.age&&(e+=", "+t.age),'<span class="mini-suggest__item-descr mini-suggest__item-descr_size_sm mini-suggest__item-descr_align_bottom">'+MBEM.encode(e)+"</span>"}}),MBEM.decl({block:"mini-suggest",modName:"direct",modVal:"yes"},{_buildDirectLabel:function(t,e){return this._buildItemMark("direct",e)},_shouldDivideItems:function(t,e){return!!e&&(this.__base.apply(this,arguments)||this.params.direct.isSeparated&&(e[5]||{}).isAd)}}),MBEM.decl({block:"mini-suggest",modName:"direct",modVal:"yes"},{__constructor:function(){this._adVisibilityChekers={},this._prevVisibilityCounterUrls={},this.__base.apply(this,arguments)},_renderItems:function(){this.__base.apply(this,arguments),this._isShown&&this._checkVisibilityAdvItems()},_syncItems:function(){this.__base.apply(this,arguments),this._adPositions=this._dataItems.reduce(function(t,e,i){if(e[5]&&this._isDirect(e[5])){if(this._adIsHidden(this._items[i].firstChild))return this.trigger("adb",{hidden:!0}),this._items[i].setAttribute("data-hidden",1),t;this.trigger("adb"),t.push(i)}return t}.bind(this),[])},_hidePopup:function(){if(this._isShown){for(var t in this._adVisibilityChekers)this._adVisibilityChekers.hasOwnProperty(t)&&clearTimeout(this._adVisibilityChekers[t]);this._adVisibilityChekers={}}this.__base.apply(this,arguments)},_showPopup:function(){this.__base.apply(this,arguments),this._dataItems&&this._checkVisibilityAdvItems()},_isDirect:function(t){return"ad"===t.type},_checkVisibilityAdvItems:function(){var i=this.params.direct,s={};if(this._adPositions.forEach(function(t){var t=this._dataItems[t],e=t&&t[5]&&t[5].linkht;e&&(i.counter_delay?this._prevVisibilityCounterUrls[e]||(s[e]=this._adVisibilityChekers[e]||setTimeout(function(){this._sendVisibilityCounter(e)}.bind(this),i.counter_delay)):this._sendVisibilityCounter(e))}.bind(this)),i.counter_delay){for(var t in this._adVisibilityChekers)this._adVisibilityChekers.hasOwnProperty(t)&&!s[t]&&(clearTimeout(this._adVisibilityChekers[t]),this._adVisibilityChekers[t]=null);this._adVisibilityChekers=s}},_adIsHidden:function(t){t=t&&window.getComputedStyle(t,null);return"none"===t.display||"visible"!==t.visibility||"1"!==t.opacity||-1===["static","relative"].indexOf(t.position)},_onItemClick:function(t,e){e=e.node.getAttribute("data-index"),e=this._dataItems[e],e=e&&e[5]&&e[5].linkht;e&&this._sendVisibilityCounter(e),this.__base.apply(this,arguments)},_sendVisibilityCounter:function(t){this._prevVisibilityCounterUrls[t]||(this._prevVisibilityCounterUrls[t]=!0,(new Image).src=t)},_isItemSelectableByKeyboard:function(t){return this.__base.apply(this,arguments)&&!t.getAttribute("data-hidden")}}),MBEM.decl({block:"mini-suggest",modName:"direct",modVal:"yes"},{_isDirect:function(t){return this.__base.apply(this,arguments)||t.isAd},_onItemClick:function(t,e){e=this._dataItems[e.itemIndex],e=e&&e[5]&&e[5].ad_counter;e&&(MBEM.sendBeacon(e," ")||((new Image).src=e)),this.__base.apply(this,arguments)}}),MBEM.decl({block:"mini-suggest",modName:"theme",modVal:"market"},{_buildPopupClassList:function(){return this.__base.apply(this,arguments)+" "+this.__self.className("popup","theme","market")}}),MBEM.decl({block:"mini-suggest",modName:"processor",modVal:"market"},{_processResponse:function(t){return t.reduce(function(t,e){var i=3===e.length,s=e[0],n=e[1],o=i?null:e[2],r=i?null:e[3],e=i?e[2]:e[4];return e&&(i||e.target||(e.target="_self"),"fulltext"===s&&(e.inline=!0),"ad"===s&&(s="nav",e.isAd=!0)),t.push([s,n,null,o,r,e]),t},[])}})}();
