(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";function asyncGeneratorStep(e,t,i,n,o,r,s){try{var a=e[r](s),d=a.value}catch(e){return void i(e)}a.done?t(d):Promise.resolve(d).then(n,o)}function _asyncToGenerator(e){return function(){var t=this,i=arguments;return new Promise(function(n,o){var r=e.apply(t,i);function s(e){asyncGeneratorStep(r,n,o,s,a,"next",e)}function a(e){asyncGeneratorStep(r,n,o,s,a,"throw",e)}s(void 0)})}}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}!function(){var e=navigator.userAgent.indexOf("MSIE ")>0||navigator.userAgent.indexOf("Trident/")>0,t=function(){function t(e,t,i,n,o){var r;this.id=this.$generateGuid(),this.parentId=e,this.nmId=t.nmId,this.enabledForRegion=t.enabledForRegion,this.isImport=t.isImport,this.hasVideo=null!==(r=t.hasVideo)&&void 0!==r&&r,this.picsCount=t.picsCount,this.urlForReccomendations=t.urlForReccomendations,this.deliveryModel=i,this.videoModel=n,this.statsModel=o,this.delta=this.hasVideo,this.currentSlide=this.delta,this.totalSlides=this.picsCount+this.delta,this.hideBtn=!1,this.onColorChanged=this.onColorChanged.bind(this)}var i=t.prototype;return i.init=function(){return this._bindEvents(),this},i.destroy=function(){return this._unbindEvents(),this.videoModel.destroy(),this},i.onColorChanged=function(e){var t,i,n=this,o=e.detail,r=o.sourceId,s=o.sourceNmId,a=o.selectedNomenclature;if(r==this.parentId&&s==this.nmId){var d=null!==(t=a.hasVideo)&&void 0!==t&&t;null===(i=this.imageCarousel)||void 0===i||i.destroy(),$.observable(this).setProperty({nmId:a.nmId,enabledForRegion:a.enabledForRegion,isImport:a.isImport,hasVideo:a.hasVideo,picsCount:a.picsCount,urlForReccomendations:a.urlForReccomendations,delta:d,totalSlides:a.picsCount+d,currentSlide:d}),window.requestAnimationFrame(function(){return n.initCarousel()})}},i.initCarousel=function(){var e,t=this;this.container=document.getElementById(this.id);var i=null===(e=this.container)||void 0===e?void 0:e.querySelector(".j-sw-photo-product-popup");i&&(this.imageCarousel=new Swiper(i,{slidesPerView:1,spaceBetween:0,initialSlide:this.currentSlide,on:{slideChangeTransitionEnd:function(){var e;$.observable(t).setProperty({hideBtn:t.hasVideo&&(null===(e=t.imageCarousel)||void 0===e?void 0:e.realIndex)==t.videoSlideIndex})}},pagination:{el:i.querySelector(".j-pagination"),type:"fraction",renderFraction:function(e,t){return'<span class="'+e+'"></span>/<span class="'+t+'"></span>'}}}))},i.moveToPreviosSlide=function(e){e.stopPropagation(),0!=this.currentSlide&&($.observable(this).setProperty({currentSlide:this.currentSlide-1}),this.imageCarousel.slidePrev(),this._stopVideos(),this._sendSlideStats())},i.moveToNextSlide=function(e){e.stopPropagation(),this.currentSlide!=this.totalSlides&&($.observable(this).setProperty({currentSlide:this.currentSlide+1}),this.imageCarousel.slideNext(),this._stopVideos(),this._sendSlideStats())},i.slideToVideo=function(e){var t;if(e.stopPropagation(),this.hasVideo){var i=this.videoSlideIndex;$.observable(this).setProperty({currentSlide:this.videoSlideIndex}),this.imageCarousel.slideTo(i,120*Math.abs(this.imageCarousel.realIndex-i)),null===(t=this.statsModel)||void 0===t||t.sendEvent("Item_Video_Icon_T")}},i._stopVideos=function(){var e;null===(e=this.container)||void 0===e||e.querySelectorAll(".j-wb-video-player").forEach(function(e){return e.pause()})},i._updateCarouser=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.$helper.animationFrameWithMinDelay(50,function(){t.imageCarousel.update(),t.imageCarousel.loopCreate()});case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),i._sendSlideStats=function(){var e,t,i=this.imageCarousel.realIndex;this.hasVideo&&i==this.videoSlideIndex?null===(e=this.statsModel)||void 0===e||e.sendEvent("Item_Video_Icon_T"):null===(t=this.statsModel)||void 0===t||t.sendEvent("Item_Photo_S",{index:i+1})},i._bindEvents=function(){this.$eventBus.addEventListener("ProductColorChanged",this.onColorChanged),this.$eventBus.addEventListener("ProductChanged",this.onColorChanged)},i._unbindEvents=function(){this.$eventBus.removeEventListener("ProductColorChanged",this.onColorChanged),this.$eventBus.removeEventListener("ProductChanged",this.onColorChanged)},_createClass(t,[{key:"template",get:function(){return t.template}},{key:"videoSlideIndex",get:function(){return 0}},{key:"isIE",get:function(){return e}}]),t}();window.__spaModuleManager__.register("productPopupImageGallery",t)}();

},{}]},{},[1]);
