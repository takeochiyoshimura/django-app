(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function asyncGeneratorStep(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){return void r(e)}l.done?t(s):Promise.resolve(s).then(n,i)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var a=e.apply(t,r);function o(e){asyncGeneratorStep(a,n,i,o,l,"next",e)}function l(e){asyncGeneratorStep(a,n,i,o,l,"throw",e)}o(void 0)})}}$.views&&$.views.tags({shortDeliveries:{mainElement:".delivery__slider-wrap",template:'\n                <div class="delivery__slider-wrap">\n                {^{if ~tag.deliveries}}\n                    <div class="swiper-container">\n                        <div class="swiper-wrapper">\n                        {{for ~tag.deliveries}}\n                            <div class="swiper-slide" >\n                                <a href="{{:~deliveriesUrl}}" class="delivery__item">\n                                    <div class="delivery__info" data-link="class{merge: (totalToPay > 0) toggle=\'delivery__info--pay\'}">\n                                        {^{if totalToPay > 0}}\n                                        <div class="delivery__info-title">{{:~tag.localizer.haveUnpaidItemsVariable}} {{priceWithCurrencyOld:totalToPay true currency}}</div>\n                                        <button type="button" class="btn-main delivery__info-btn">{{:~tag.localizer.payVariable}}</button>\n                                        {{else}}\n                                        <div class="delivery__info-title delivery__info-title--success">{{:(courier ? ~tag.localizer.atCourier: ~tag.localizer.orderReady)}}</div>\n                                        {{if workTime}}\n                                        <div class="delivery__info-text">{{:workTime}}</div>\n                                        {{/if}}\n                                        <div class="delivery__info-text">{{:deliveryType}}: {{:address}}</div>\n                                        <div class="delivery__info-code hide-desktop">{{if showCode}}{{:~tag.privateCode}}{{/if}}</div>\n                                        {{/if}}\n                                    </div>\n                                    \n                                    {^{if maxItems > 0}}\n                                    <div class="delivery__photo">\n                                        {{for products end=maxItems}}\n                                        <div class="delivery__photo-item img-plug">\n                                            <img src="{{:~ImageUrl(code1S, \'c246x328\', 1)}}" alt="" width="45" height="60">\n                                        </div>\n                                        {{/for}}\n                                        {{if products.length > maxItems}}\n                                        <div class="delivery__photo-hidden">+{{:products.length - maxItems}}</div>\n                                        {{/if}}\n                                    </div>\n                                    {{/if}}\n                                    \n                                    {{if ~tag.qrCode && totalToPay == 0 }}\n                                    <div class="delivery__qr-wrap hide-desktop">\n                                        <img class="delivery__qr" src="data:image/png;base64,{{:~tag.qrCode}}" alt="qr-code" data-link="{tooltip classes=\'tooltip-qr\' pos=\'center bottom\' trigger=\'click\' tmplName=\'readyDeliveriesQrCodeTooltip\' tmplData=~tag.qrCode preventDefault=true}">\n                                    </div>\n                                    {{/if}}\n                                </a>\n                            </div>\n                        {{/for}}\n                        </div>\n                        \n                        \n                        <button class="swiper-button-prev swiper-button-disabled"></button>\n                        <button class="swiper-button-next swiper-button-disabled"></button>\n                    </div>\n                    \n                    <div class="swiper-pagination"></div>\n                {{/if}}    \n                </div>\n                {^{if ~loading }}\n                <div class="delivery__preloader"></div>\n                {{/if}}\n                ',onUpdate:!1,minItems:3,init:function(){this.localizer=this.ctx.root.$localziation,this.ml=this.ctx.root.$moduleLoader;var e=this.ctx.root.$router.routes.find(function(e){return"SpaActiveOrdersEntrypoint"==e.name});e&&this.ctxPrm("deliveriesUrl",e.path)},onAfterLink:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var r,n,i,a,o,l,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.ctxPrm("loading",!0),t.next=3,e.ctx.root.$services.groupedDeliveriesService.get({readyToReceive:!0,short:!0,fromCache:!0}).catch(function(e){return console.log(e)});case 3:if(i=t.sent){t.next=7;break}return e.ctxPrm("loading",!1),t.abrupt("return");case 7:if(a=null!==(r=i.active)&&void 0!==r?r:[],i.postPayments&&(a=[].concat(_toConsumableArray(i.postPayments),_toConsumableArray(i.active))),e.ctxPrm("loading",!1),i&&!(a.length<1)){t.next=12;break}return t.abrupt("return");case 12:if(o=e,$.observable(o).setProperty({deliveries:a,privateCode:i.privateCode,qrCode:i.qrCode,tryInitPayPopup:function(){-1!==location.search.indexOf("paytherest")&&o.handler.call(this)},payTheRest:function(e){var t=this;null==e||e.preventDefault(),o.ml.loadModuleAsync("paymentPopup").then(function(e){var r=t.products.map(function(e){return e.rId});e.showPayTheRestPopupAsync(t.totalToPay,r)})}}),l=null===(n=o.mainElem[0])||void 0===n?void 0:n.querySelector(".swiper-container")){t.next=17;break}return t.abrupt("return");case 17:l.querySelectorAll(".delivery__info").forEach(function(t){var r=$.view(t),n=t.closest(".delivery__item").offsetWidth-Math.min(t.scrollWidth,t.offsetWidth)-65,i=e.minItems;n>60&&(i=~~(n/60)),$.observable(r.data).setProperty("maxItems",i)}),(s=new Swiper(l,{breakpoints:{1024:{}},init:!1,lazy:!0,preloadImages:!1,slidesPerView:"auto",spaceBetween:0,navigation:{nextEl:l.querySelector(".swiper-button-next"),prevEl:l.querySelector(".swiper-button-prev")},pagination:i.active.length>1&&{el:e.mainElem[0].querySelector(".swiper-pagination"),clickable:!0,paginationType:"bullets",dynamicBullets:!0}})).on("breakpoint",function(){if(2==i.active.length){var t="m"==wb.settings.displayMode,r=e.mainElem[0].querySelector(".swiper-pagination");r&&(r.style.display=t?null:"none")}}),s.init();case 21:case"end":return t.stop()}},t)}))()}}});

},{}]},{},[1]);
