(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";!function(){var e=function(){function e(e,t,r,n){var s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this.element=e instanceof Element?e:document.querySelector(e),null==this.element)throw new Error("Element for LazyBlock Loader doesn`t exist");this.requestUrl=t,this.onLoadCallback=r,this.onDestroyCallback=n,this.maxRetryCount=3,this.currentRetryCount=0,this.loading=!1,this.removeFromObserver=s,this._observe=this._observe.bind(this),this._init()}var t=e.prototype;return t.reload=function(){this.destroy(),this._init()},t.destroy=function(){var e,t;null===(e=this.observer)||void 0===e||e.disconnect(),this.throttledScrollHandler&&window.removeEventListener("scroll",this.throttledScrollHandler),null===(t=this.onDestroyCallback)||void 0===t||t.call(this)},t._init=function(){this.$apiSupport.intersectionObserver?(this.observer=new IntersectionObserver(this._observe,{rootMargin:"50px 0px"}),this.observer.observe(this.element)):(this.throttledScrollHandler=this.$helper.throttle(this._scrollHandler,300).bind(this),window.addEventListener("scroll",this.throttledScrollHandler))},t._observe=function(e,t){var r=this;e.forEach(function(e){var n=e.isIntersecting,s=e.target,o=e.intersectionRatio;(n||o>0)&&!r.loading&&(r.requestUrl?r._requestDataAsync().then(function(e){e||t.unobserve(s)}):(r.removeFromObserver&&t.unobserve(s),r.onLoadCallback({isSuccess:!0})))})},t._requestDataAsync=function(){var e=this;return this.loading=!0,fetch(this.requestUrl).then(function(e){return e.json()}).then(function(t){return new Promise(function(r){$.processResponse(t,function(t){r(!1),e.onLoadCallback({isSuccess:!0,data:t})},function(t){r(++e.currentRetryCount<e.maxRetryCount),e.onLoadCallback({isSuccess:!1,data:{err:t}})}),e.loading=!1})}).catch(function(t){return console.error(t.message),e.onLoadCallback({isSuccess:!1,data:{err:t}}),Promise.resolve(++e.currentRetryCount<e.maxRetryCount)})},t._scrollHandler=function(){var e=this;this.$helper.isElementInViewport(this.element)&&(this.requestUrl?this._requestDataAsync().then(function(t){t||e.destroy()}):(this.removeFromObserver&&this.destroy(),this.onLoadCallback({isSuccess:!0})))},e}();window.__spaModuleManager__.register("lazyBlockLoader",e)}();

},{}]},{},[1]);
