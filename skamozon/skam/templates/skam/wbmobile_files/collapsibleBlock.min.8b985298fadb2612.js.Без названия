(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";$.templates({collapsibleBlockTemplate:'\n            {^{if needToggle && useGradient}}\n                <div class="collapsible__gradient" data-link="class{merge: !isCollapsed toggle=\'hide\'}"></div>\n            {{/if}}\n            {^{if needToggle}}\n                <div class="collapsible__toggle-wrap">\n                    <button class="collapsible__toggle {{:btnClass}}" {{if !!nameForWba}}data-name-for-wba=\'{{:nameForWba}}\'{{/if}} data-link=\'text{:isCollapsed ? collapsedMsg : unCollapsedMsg}{on toggleCollapse !isCollapsed}\' type="button">Развернуть описание</button>\n                </div>\n            {{/if}}'}),$.views.tags({collapsibleBlock:{dataBoundOnly:!0,bindTo:["maxCollapsedHeight"],init:function(){var e=this;this.reset=this.reset.bind(this),this.recalc=this.recalc.bind(this),this.ctx.root.$helper.nextTick().then(function(){var t,l,s=e.tagCtx.props.itemSelector,o=e.tagCtx.props.maxCollapsedHeight;try{l=(t=document.querySelector(s)).offsetHeight}catch(e){return void console.warn("selector is incorrect or elem doesnt exist")}t.style.maxHeight=e.tagCtx.props.maxCollapsedHeight+"px";var a=document.createElement("div");a.classList.add("collapsible__bottom"),t.insertAdjacentElement("afterend",a),e.$content=t,e.model={needToggle:!1,useGradient:e.tagCtx.props.useGradient,isCollapsed:!0,collapsedMsg:e.tagCtx.props.collapsedMsg,unCollapsedMsg:e.tagCtx.props.unCollapsedMsg,btnClass:e.tagCtx.props.btnClass,nameForWba:e.tagCtx.props.nameForWba,toggleCollapse:function(e,t){$.observable(this).setProperty({isCollapsed:e}),document.querySelector(s).style.maxHeight=e?o+"px":"none"}},$.templates.collapsibleBlockTemplate.link(a,e.model),window.addEventListener("inPlaceFullUpdate",e.reset),window.addEventListener("resize",e.recalc),l>e.tagCtx.props.maxCollapsedHeight&&$.observable(e.model).setProperty({needToggle:!0})})},setValue:function(){this.$content&&(this.$content.style.maxHeight=this.tagCtx.props.maxCollapsedHeight+"px")},unBind:function(){window.removeEventListener("inPlaceFullUpdate",this.reset),window.removeEventListener("resize",this.recalc)},reset:function(){var e=this;$.observable(this.model).setProperty({needToggle:!1,isCollapsed:!0}),this.ctx.root.$helper.nextTick().then(function(){var t=document.querySelector(e.tagCtx.props.itemSelector);t&&t.scrollHeight>e.tagCtx.props.maxCollapsedHeight&&(t.style.maxHeight=e.tagCtx.props.maxCollapsedHeight+"px",$.observable(e.model).setProperty({needToggle:!0}))})},recalc:function(){var e=document.querySelector(this.tagCtx.props.itemSelector);if(null!=e&&document.documentElement.contains(e)&&this.model.isCollapsed){var t=e.scrollHeight;t>=this.tagCtx.props.maxCollapsedHeight&&!this.model.needToggle?$.observable(this.model).setProperty({needToggle:!0}):this.model.needToggle&&t<this.tagCtx.props.maxCollapsedHeight&&$.observable(this.model).setProperty({needToggle:!1})}}}});

},{}]},{},[1]);
